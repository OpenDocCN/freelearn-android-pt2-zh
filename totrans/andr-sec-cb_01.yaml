- en: Chapter 1. Android Development Tools
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章 Android开发工具
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍以下内容：
- en: Installing the Android Development Tools (ADT)
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装Android开发工具（ADT）
- en: Installing the Java Development Kit (JDK)
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装Java开发工具包（JDK）
- en: Updating the API sources
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新API源
- en: Alternative installation of the ADT
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ADT的替代安装方法
- en: Installing the Native Development Kit (NDK)
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装本地开发工具包（NDK）
- en: Emulating Android
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模拟Android
- en: Creating Android Virtual Devices (AVDs)
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建Android虚拟设备（AVDs）
- en: Using the Android Debug Bridge (ADB) to interact with the AVDs
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Android调试桥（ADB）与AVD进行交互
- en: Copying files off/onto an AVD
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在AVD上复制文件
- en: Installing applications on the AVDs via ADB
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过ADB在AVD上安装应用程序
- en: Introduction
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 引言
- en: A very clever person once said that, "you should keep your friends close but
    your enemies closer". Being a security professional means keeping an eye on what
    developers are doing, have done, and are likely to do. This is because the decisions
    they make greatly affect the security landscape; after all, if no one wrote bad
    software, no one would exploit it!
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 曾经有位非常聪明的人说过，“你应该亲近你的朋友，但更要亲近你的敌人”。作为一名安全专业人士意味着要关注开发者正在做什么，已经做了什么，以及可能做什么。因为他们的决定极大地影响着安全环境；毕竟，如果没有人编写糟糕的软件，没有人会去利用它！
- en: Given that this book is aimed at anyone interested in analyzing, hacking, or
    developing the Android platform, the *know thy enemy* concept applies to you too!
    Android developers need to stay somewhat up to date with what Android hackers
    are up to if they hope to catch security vulnerabilities before they negatively
    affect the users. Conversely, Android hackers need to stay up to date with what
    Android developers are doing.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于这本书面向任何对分析、黑客或开发Android平台感兴趣的人，*了解你的敌人*的概念同样适用于你！Android开发者需要跟上Android黑客的活动，以希望在他们给用户带来负面影响之前捕捉到安全漏洞。反之，Android黑客也需要跟上Android开发者的步伐。
- en: The upcoming chapters will walk you through getting the latest and greatest
    development and hacking tools and will get you to interact directly with the Android
    security architecture, both by breaking applications and securing them.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的章节将指导你获取最新和最棒的开发及黑客工具，并让你直接与Android安全架构进行交互，既包括破解应用程序也包括保护它们。
- en: This chapter focuses on getting the **Android Development Tools** (**ADT**)
    up and running and discusses how to troubleshoot an installation and keep them
    up to date. If you feel you are already well-acquainted with the Android development
    environment and tool chains, feel free to skip this chapter.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 本章重点介绍如何安装并运行**Android开发工具**（**ADT**），并讨论如何解决安装问题以及保持工具更新。如果你认为自己已经非常熟悉Android开发环境和工具链，可以自由跳过这一章。
- en: Without further ado, let's talk about grabbing and installing the latest Android
    Development Tools.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 不再赘述，让我们直接讨论如何获取并安装最新的Android开发工具。
- en: Installing the Android Development Tools (ADT)
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Android开发工具（ADT）
- en: Given that there are many versions of the Android framework already deployed
    on mobile platforms and a variety of handsets that support it, Android developers
    need tools that give them access to many device- and operating system-specific
    Application Programming Interfaces (**APIs**) available on the Android platform.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到已经有许多版本的Android框架部署在移动平台上，以及支持它的各种不同手机，Android开发者需要能够访问到Android平台上许多设备和操作系统特定的应用程序编程接口（**APIs**）。
- en: We're talking about not just the Android APIs but also handset-specific APIs.
    Each handset manufacturer likes to invest in the developer mindshare in their
    own way by providing exclusive APIs and services to their developers, for example,
    the HTC OpenSense APIs. The ADT consolidates access to these APIs; provides all
    the necessary tools to debug, develop, and deploy your Android apps; and makes
    it easy for you to download them and keep them up to date.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不仅仅讨论Android API，还包括手机特定的API。每个手机制造商都希望通过提供专有的API和服务来吸引开发者，例如HTC OpenSense
    APIs。ADT统一了这些API的访问方式；提供了所有必要的工具来调试、开发和部署你的Android应用；并且让你轻松下载并保持更新。
- en: How to do it...
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'The following steps will walk you through the process of downloading the ADT
    and getting them up and running:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤将指导你完成下载ADT并让它们运行起来的过程：
- en: You'll need to head over to [https://developer.android.com](https://developer.android.com)
    and navigate to the ADT **Download** page or just visit [https://developer.android.com/sdk/index.html#download](https://developer.android.com/sdk/index.html#download).
    You should see a page like the one in the following screenshot:![How to do it...](img/00002.jpeg)
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你需要访问[https://developer.android.com](https://developer.android.com)，并导航到 ADT
    **下载**页面，或者直接访问[https://developer.android.com/sdk/index.html#download](https://developer.android.com/sdk/index.html#download)。你应该能看到如下截图所示的页面：![如何操作...](img/00002.jpeg)
- en: Once you're there, click on **Download the SDK** and the following screen should
    appear:![How to do it...](img/00003.jpeg)
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 到达那里后，点击**下载 SDK**，应出现以下屏幕：![如何操作...](img/00003.jpeg)
- en: Of course, you will need to accept the license agreement before downloading
    and select the appropriate CPU type, or register size if you're not sure how to
    check your CPU type.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当然，在下载之前，你需要接受许可协议，并选择适当的 CPU 类型。如果你不确定如何检查 CPU 类型，可以选择注册大小。
- en: 'On Windows, you need to complete the following steps:'
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在 Windows 上，你需要完成以下步骤：
- en: Click on **Start**.
  id: totrans-27
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**开始**。
- en: Right-click on **My Computer**.
  id: totrans-28
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**我的电脑**上右键点击。
- en: Select **Properties**.
  id: totrans-29
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**属性**。
- en: A window with your computer's system-specific information should pop up. The
    information you are looking for should be under the **System** section, labeled
    **System type**.
  id: totrans-30
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 应弹出包含计算机系统特定信息的窗口。你寻找的信息应在**系统**部分，标记为**系统类型**。
- en: '![How to do it...](img/00004.jpeg)'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/00004.jpeg)'
- en: 'To check your system type on Ubuntu, Debian, or Unix-based distributions, perform
    the following steps:'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在 Ubuntu、Debian 或基于 Unix 的发行版上检查系统类型，执行以下步骤：
- en: Open a terminal either by pressing *Ctrl* + *Alt* + *T* or simply launching
    it using the graphical interface.
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按 *Ctrl* + *Alt* + *T* 打开终端，或者直接通过图形界面启动它。
- en: 'Execute the following command:'
  id: totrans-34
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令：
- en: '[PRE0]'
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Alternatively, you could use `lscpu` that should show you something like the
    following screenshot:'
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 或者，你可以使用 `lscpu`，它应该会显示类似于以下截图的内容：
- en: '![How to do it...](img/00005.jpeg)'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/00005.jpeg)'
- en: When you're happy with the license agreement and you've selected the correct
    system type, click on **Download** in the ADT **Download** page. Once the ZIP
    file has been downloaded, it should look like the following screenshot on Windows:![How
    to do it...](img/00006.jpeg)
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当你对许可协议感到满意，并选择了正确的系统类型后，在 ADT **下载**页面上点击**下载**。下载 ZIP 文件后，在 Windows 上应该看起来像以下截图：![如何操作...](img/00006.jpeg)
- en: The archive will have the same structure on the Linux- or Unix-based distributions.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在基于 Linux 或 Unix 的发行版上，该归档文件具有相同的结构。
- en: Installing the Java Development Kit (JDK)
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Java 开发工具包（JDK）
- en: Android uses a customized version of the Java runtime to support its applications.
    This means, before we can get going with Eclipse and developing Android applications,
    we actually need to install the Java runtime and development tools. These are
    available in the **Java Development Kit** (**JDK**).
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: Android 使用定制的 Java 运行时版本来支持其应用程序。这意味着，在我们可以使用 Eclipse 开发 Android 应用程序之前，实际上需要安装
    Java 运行时和开发工具。这些工具包含在**Java 开发工具包**（**JDK**）中。
- en: How to do it...
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Installing the JDK on Windows works as follows:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 上安装 JDK 的步骤如下：
- en: Grab a copy of the JDK from Oracle's **Downloads** page, [http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html).
    Click on **DOWNLOAD**. The following screenshot shows the **Downloads** page:![How
    to do it...](img/00007.jpeg)
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Oracle 的**下载**页面获取 JDK 的副本，[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)。点击**DOWNLOAD**。以下截图显示了**下载**页面：![如何操作...](img/00007.jpeg)
- en: Make sure to select the appropriate version for your system type; see the previous
    walkthrough to find out how to check your system type. The following screenshot
    highlights the Windows system types supported by the Oracle Java JDK:![How to
    do it...](img/00008.jpeg)
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保选择适合你的系统类型的适当版本；查看前面的演练以了解如何检查系统类型。以下截图突出了 Oracle Java JDK 支持的 Windows 系统类型：![如何操作...](img/00008.jpeg)
- en: After downloading the JDK, run the `jdk-[version]-[platform version].exe` file.
    For instance, you could have an EXE file named something like `jdk-7u21-windows-i586.exe`.
    All you need to do now is follow the prompts until the installation of all the
    setups is completed. The following screenshot is what the install wizard should
    look like once it's launched:![How to do it...](img/00009.jpeg)
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载JDK后，运行`jdk-[版本]-[平台版本].exe`文件。例如，您可能有一个名为`jdk-7u21-windows-i586.exe`的EXE文件。现在您需要做的就是按照提示操作，直到所有设置安装完成。一旦启动安装向导，它看起来应该像下面的截图：![如何操作…](img/00009.jpeg)
- en: Once the install wizard has done its job, you should see a fresh install of
    your JDK and JRE under `C:\Program Files\Java\jdk[version]` and should now be
    able to launch Eclipse.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装向导完成其工作，您应该在`C:\Program Files\Java\jdk[版本]`下看到全新安装的JDK和JRE，并且现在应该能够启动Eclipse。
- en: There's more…
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多…
- en: 'Installing the Java Runtime and Development tools on Ubuntu Linux is somewhat
    simpler. Seeing that Ubuntu has a sophisticated package and repository manager,
    all you need to do is make use of it by firing off a few simple commands from
    the terminal window. You need to execute the following steps:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在Ubuntu Linux上安装Java运行时和开发工具相对简单。考虑到Ubuntu有一个成熟的包和仓库管理器，您只需要通过终端窗口执行几个简单的命令来利用它。您需要执行以下步骤：
- en: Open a terminal, either by searching for the terminal application via your Unity,
    KDE, or Gnome desktop or by pressing *Ctrl* + *Alt* + *T*.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个终端，可以通过您的Unity、KDE或Gnome桌面搜索终端应用程序，或者按*Ctrl* + *Alt* + *T*。
- en: 'You may need to update your package list before installation, unless you''ve
    already done that a couple of minutes ago. You can do this by executing either
    of the following commands:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装之前，您可能需要更新您的软件包列表，除非您几分钟前已经做过。您可以通过执行以下任一命令来完成此操作：
- en: '[PRE1]'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Or:'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 或者：
- en: '[PRE2]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'You should see your terminal print out all the downloads it''s performing from
    your repositories as shown in the following screenshot:'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您应该会看到您的终端打印出从您的仓库执行的所有下载，如下面的截图所示：
- en: '![There''s more…](img/00010.jpeg)'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![还有更多…](img/00010.jpeg)'
- en: 'Once that''s done, execute the following command:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，执行以下命令：
- en: '[PRE3]'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'You will need to enter your password if you have been added to your `sudoers`
    file correctly. Alternatively, you could borrow root privileges to do this by
    executing the following command, assuming that you have the root user''s password:'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您已正确添加到`sudoers`文件，您需要输入密码。或者，如果您有root用户的密码，可以通过执行以下命令借用root权限来完成此操作：
- en: '[PRE4]'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This is displayed in the following screenshot:'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 下面的截图显示了这一点：
- en: '![There''s more…](img/00011.jpeg)'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![还有更多…](img/00011.jpeg)'
- en: 'Once your JDK is installed properly, you should be able to launch Eclipse and
    get going with your Android development. When you launch Eclipse, you should see
    the following screenshot:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您的JDK安装正确，您应该能够启动Eclipse并开始进行Android开发。当您启动Eclipse时，您应该会看到以下截图：
- en: '![There''s more…](img/00012.jpeg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![还有更多…](img/00012.jpeg)'
- en: 'After successful installation, the toolbar in your Eclipse installation should
    look something like the one in the following screenshot:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 成功安装后，您的Eclipse安装中的工具栏应该看起来类似于下面截图中的样子：
- en: '![There''s more…](img/00013.jpeg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![还有更多…](img/00013.jpeg)'
- en: Updating the API sources
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更新API源
- en: The SDK manager and related tools come bundled with the ADT package; they provide
    access to the latest and most stable APIs, Android emulator images, and various
    debugging and application testing tools. The following walkthrough shows you how
    to update your APIs and other Android development-related resources.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: SDK管理器和相关工具与ADT包捆绑在一起；它们提供了对最新和最稳定的API、Android模拟器镜像以及各种调试和应用程序测试工具的访问。以下演练将指导您如何更新您的API和其他与Android开发相关的资源。
- en: How to do it...
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Updating the APIs for your ADT works as follows:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 更新ADT的API如下操作：
- en: Navigate to the SDK manager. If you're doing this all from Windows, you should
    find it in the root of the `ADT-bundle` folder called `SDK Manager.exe`. Ubuntu
    users will find it at `[path to ADT-bundle]/sdk/tools/android`.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到SDK管理器。如果您从Windows进行所有操作，您应该在`ADT-bundle`文件夹的根目录中找到名为`SDK Manager.exe`的文件。Ubuntu用户可以在`[ADT-bundle路径]/sdk/tools/android`找到它。
- en: All you need to do is launch the SDK manager. It should start up and begin retrieving
    a fresh list of the available API and documentation packages.![How to do it...](img/00014.jpeg)
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要做的就是启动SDK管理器。它应该启动并开始检索可用的API和文档包的新列表。![如何操作…](img/00014.jpeg)
- en: You will need to make sure that you select the **Tools** package; of course,
    you could also select any other additional packages. A good idea would be to download
    the last two versions. Android is very backward compatible so you don't really
    need to worry too much about the older APIs and documentation, unless you're using
    it to support really old Android devices.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你需要确保选择了 **工具** 软件包；当然，你也可以选择其他附加软件包。一个好的建议是下载最后两个版本。Android 向后兼容性很好，所以你不必太担心较旧的
    API 和文档，除非你正在使用它们来支持非常旧的 Android 设备。
- en: You will need to indicate that you accept the license agreement. You can either
    do this for every single object being installed or you can click on **Accept All**.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你需要表明你接受许可协议。你可以为每个正在安装的对象这样做，或者点击 **全部接受**。
- en: Once you've accepted the licenses, you can collect your documentation and APIs
    by clicking on **Install** as shown in the following screenshot:![How to do it...](img/00015.jpeg)
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受完许可协议后，你可以通过点击 **安装** 来收集你的文档和 API，如下截图所示：![如何操作...](img/00015.jpeg)
- en: Alternative installation of the ADT
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ADT 的替代安装方法
- en: If the preceding methods for installing Eclipse and the ADT plugin don't work
    for some reason, you could always take the old school route and download your
    own copy of Eclipse and install the ADT plugin manually via Eclipse.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 如果前面介绍安装 Eclipse 和 ADT 插件的方法由于某些原因不奏效，你可以选择走老路，下载你自己的 Eclipse 副本并手动通过 Eclipse
    安装 ADT 插件。
- en: How to do it...
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Downloading and plugging in the ADT works as follows:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 下载并安装 ADT 的步骤如下：
- en: Download Eclipse—Helios or a later version—from [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/).
    Please make sure to select the appropriate version for your operating system.
    You should see a page that looks like the following screenshot:![How to do it...](img/00016.jpeg)
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/) 下载
    Eclipse—Helios 或更高版本。请确保选择适合你操作系统的版本。你应该会看到一个类似以下截图的页面：![如何操作...](img/00016.jpeg)
- en: Download the ADT bundle for your platform version from the Android website,
    [http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html).
    The following screenshot displays a part of the page on this website:![How to
    do it...](img/00017.jpeg)
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Android 网站 [http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)
    下载适合你平台版本的 ADT 套件。以下截图显示该网站页面的部分内容：![如何操作...](img/00017.jpeg)
- en: Make sure you have the Java JDK installed.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保你已经安装了 Java JDK。
- en: If your JDK installation is good to go, run the Eclipse installer you downloaded
    in step 1.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你的 JDK 安装没有问题，运行在第 1 步下载的 Eclipse 安装程序。
- en: Once Eclipse is installed and ready to go, plugin your ADT.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦 Eclipse 安装完毕并准备就绪，就可以安装你的 ADT 插件了。
- en: Open Eclipse and click on the **Help** button in the menu bar.![How to do it...](img/00018.jpeg)
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 Eclipse 并点击菜单栏中的 **帮助** 按钮。![如何操作...](img/00018.jpeg)
- en: Click on **Install New Software...**.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **安装新软件...**。
- en: The **Available Software** dialog box will pop up. You need to click on **Add…**.![How
    to do it...](img/00019.jpeg)
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将会弹出 **可用软件** 对话框。你需要点击 **添加…**。![如何操作...](img/00019.jpeg)
- en: The **Add Repository** dialog box will show up. You need to click on the **Archive...**
    button.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将会显示 **添加仓库** 对话框。你需要点击 **归档...** 按钮。
- en: A file browser should pop up. At this point, you will need to navigate to the
    ADT ZIP file that you downloaded in the previous steps.![How to do it...](img/00020.jpeg)
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 应该会弹出一个文件浏览器。此时，你需要导航到在前面的步骤中下载的 ADT ZIP 文件。![如何操作...](img/00020.jpeg)
- en: After finding the ADT file, click on **Open**.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到 ADT 文件后，点击 **打开**。
- en: Then click on **OK**.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后点击 **确定**。
- en: You will be shown the available packages in the `.zip` archive. Click on **Select
    All** and then on **Next**.![How to do it...](img/00021.jpeg)
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将会显示 `.zip` 压缩文件中的可用软件包。点击 **全选** 然后点击 **下一步**。![如何操作...](img/00021.jpeg)
- en: You will now need to accept the license agreement; of course, you reserve the
    right not to. It's always a good idea to give it a read. If you're happy, select
    the **I accept the terms of the license agreements** option and then click on
    **Finish**.![How to do it...](img/00022.jpeg)
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你需要接受许可协议；当然，你有权不接受。阅读它总是一个好主意。如果你满意，选择 **我接受许可协议的条款** 选项，然后点击 **完成**。![如何操作...](img/00022.jpeg)
- en: The software installation will now begin. You may get a warning stating that
    the content is unsigned and the authenticity cannot be verified. Click on **OK**.![How
    to do it...](img/00023.jpeg)
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 软件安装现在开始。你可能会收到一个警告，指出内容未签名，无法验证真实性。点击**确定**。![如何操作...](img/00023.jpeg)
- en: Restart Eclipse.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重启Eclipse。
- en: The Android SDK, the device emulator, and the supporting Eclipse functionality
    should be ready to go now. See your Eclipse toolbar. It should have some new icons.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: Android SDK、设备模拟器和支持Eclipse的功能现在应该已经准备就绪。查看你的Eclipse工具栏，它应该有一些新图标。
- en: Installing the Native Development Kit (NDK)
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装本地开发工具包（NDK）
- en: If you want to do any low-level exploitation or development on your Android
    device, you will need to make sure that you can write applications at a lower
    level on the Android platform. Low level means development in languages like C/C++
    using compilers that are built to suit the embedded platform and its various nuances.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想在Android设备上进行任何低级利用或开发，你需要确保自己能够在Android平台上进行较低级别的应用程序编写。低级别指的是使用诸如C/C++等语言进行开发，这些语言使用的编译器是为了适应嵌入式平台及其各种细节而构建的。
- en: What's the difference between Java and the native/low-level programming languages?
    Well, this topic alone could fill an entire book. But to state just the bare surface-level
    differences, Java code is compiled and statically—meaning the source code is analyzed—checked
    before being run in a virtual machine. For Android Java, this virtual machine
    is called the Dalvik—more on this later. The natively developed components of
    Android run verbatim—as their source code specifies—on the embedded Linux-like
    operating system that comes shipped with the Android devices. There is no extra
    layer of interpretation and checking—besides the odd compiler extensions and optimizations—that
    goes into getting the native code to run.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: Java和本地/低级编程语言之间有什么区别？这个话题本身就足以写成一本书。但仅就表面层次的差异来说，Java代码是在虚拟机中运行的，之前会进行编译和静态分析——即源代码在运行前会被检查。对于Android
    Java，这个虚拟机被称为Dalvik——稍后会详细介绍。Android的本地开发组件按照其源代码的精确描述，在随Android设备附带的类Linux嵌入式操作系统上运行。除了编译器扩展和优化之外，没有额外的解释和检查层次，使本地代码得以运行。
- en: The tool chains and documentation provided by the Android team to make native
    development a painless experience for the Android developers is called the **Native
    Development Kit** (**NDK**). The NDK contains all the tools that the Android developers
    need to compile their C/C++ code for the Android devices and accommodates ARM-,
    MIPS-, and x86-embedded platforms. It includes some tools that help the native
    developers analyze and debug the native applications. This walkthrough discusses
    how to get the NDK up and running on your machine.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: Android团队提供的工具链和文档，使得Android开发者能够轻松地进行本地开发，这些工具和文档统称为**本地开发工具包**（**NDK**）。NDK包含了Android开发者编译其C/C++代码所需的所有工具，并支持ARM、MIPS和x86嵌入式平台。它还包括一些帮助本地开发者分析和调试本地应用程序的工具。本教程将介绍如何在你的机器上安装并运行NDK。
- en: Before we get going, you will need to consult the system requirements list on
    [http://developer.android.com/tools/sdk/ndk/index.html#Reqs](http://developer.android.com/tools/sdk/ndk/index.html#Reqs)
    to make sure that you're machine is good to go.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始之前，你需要查看[http://developer.android.com/tools/sdk/ndk/index.html#Reqs](http://developer.android.com/tools/sdk/ndk/index.html#Reqs)上的系统要求列表，以确保你的机器可以顺利运行。
- en: How to do it...
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Getting the NDK on your machine is as simple as downloading it and making sure
    that it actually runs. We can use the following steps:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的机器上获取NDK就像下载它并确保它能运行一样简单。我们可以使用以下步骤：
- en: Downloading the NDK is pretty straightforward. Go to [http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)
    to grab the latest copy and make sure to select the appropriate version for your
    system type.![How to do it...](img/00024.jpeg)
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载NDK非常简单。前往[http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)获取最新版本，并确保选择适合你系统类型的适当版本。![如何操作...](img/00024.jpeg)
- en: Unzip the NDK to a convenient location.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将NDK解压到方便的位置。
- en: Emulating Android
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模拟Android
- en: The Android SDK comes with a pretty neat tool called the emulator, which allows
    you to emulate the Android devices. The emulator is shipped with some of the most
    popular handsets and lets you create an emulated handset of your own. Using this
    tool, you can flash new kernels, mess around with the platform and, of course,
    debug apps and test your Android malware and application exploits. Throughout
    the book we will use this tool quite a bit, so, it's important that you get to
    know the Android emulator.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: Android SDK 带有一个相当不错的工具，名为模拟器，它允许你模拟 Android 设备。该模拟器包含一些最受欢迎的手机，并允许你创建自己的模拟手机。使用这个工具，你可以刷新新内核，摆弄平台，当然，还可以调试应用程序和测试你的
    Android 恶意软件和应用漏洞。在整本书中，我们将大量使用这个工具，所以，重要的是你要了解 Android 模拟器。
- en: The emulator is pretty straightforward to use. When you want to launch a device,
    all you need to do is open the **Android Virtual Device** (**AVD**) tool either
    from your SDK folder or straight from Eclipse. Then, you can either set up a new
    device with its own memory card, CPU, and screen size as well as other custom
    features or you can select one of the preconfigured devices from a list. In this
    section, I'm going to cover exactly these things.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 模拟器使用起来非常直观。当你想要启动一个设备时，你需要做的就是从 SDK 文件夹或直接从 Eclipse 打开**Android 虚拟设备**（**AVD**）工具。然后，你可以设置一个新的设备，为其配备自己的内存卡、CPU
    和屏幕大小以及其他自定义功能，或者你可以从列表中选择一个预配置的设备。在本节中，我将详细介绍这些内容。
- en: 'Just a quick disclaimer: the following screenshots were taken on a Windows
    7 machine, but the AVD manager and device emulator work exactly the same on both
    Windows and Linux platforms, so Linux users will also be able to follow the walkthrough.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 只是一个简短的免责声明：以下屏幕截图是在 Windows 7 机器上拍摄的，但 AVD 管理器和设备模拟器在 Windows 和 Linux 平台上工作完全相同，所以
    Linux 用户也将能够跟随操作指南。
- en: How to do it...
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To emulate a device from Eclipse, use the following steps:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Eclipse 中模拟一个设备，请按照以下步骤操作：
- en: Click on the AVD manager icon on your toolbar.![How to do it...](img/00025.jpeg)
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击工具栏上的 AVD 管理器图标。![如何操作...](img/00025.jpeg)
- en: The AVD will pop up. You can either select a preconfigured featured device or
    you can set up a device according to your own criteria. For this recipe, let's
    stick to configuring our own devices.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: AVD 会弹出。你可以选择一个预配置的特色设备，或者根据你自己的标准设置一个设备。对于这个指南，让我们坚持配置我们自己的设备。
- en: Click on **New…**.![How to do it...](img/00026.jpeg)
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**新建…**。![如何操作...](img/00026.jpeg)
- en: The **Create new Android Virtual Device (AVD)** dialog box should pop up. You
    will need to fill in some metrics for the new virtual devices and give it a name.
    You can enter whatever you feel here as this recipe is just to get you to emulate
    your first device.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**创建新的 Android 虚拟设备 (AVD)** 对话框应该会弹出。你需要为新的虚拟设备填写一些指标并为其命名。这里你可以输入任何你感觉合适的内容，因为这个指南只是为了让你模拟你的第一个设备。'
- en: Once you're done, click on **OK**. The new device should show up in the AVD
    dialog box.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，点击**确定**。新的设备应该会出现在 AVD 对话框中。
- en: Click on the device you just created and click on **Start…**.![How to do it...](img/00027.jpeg)
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击你刚刚创建的设备，然后点击**启动…**。![如何操作...](img/00027.jpeg)
- en: At this point, the AVD will prompt you for the screen-size options; the default
    values aren't too bad. Click on **Launch** when you're done, and in a few seconds
    your new AVD will start up.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一点上，AVD 会提示你选择屏幕尺寸选项；默认值还不错。完成后点击**启动**，几秒钟后你的新 AVD 将开始启动。
- en: '![How to do it...](img/00028.jpeg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作...](img/00028.jpeg)'
- en: Creating Android Virtual Devices (AVDs)
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建 Android 虚拟设备 (AVD)
- en: Some of you may prefer working with your AVDs from the command-line interface
    for some reason or other. Maybe you have some awesome scripts that you'd like
    to write to set up some awesome AVDs. This recipe details how to create AVDs and
    launches them straight from the command line.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 你们中的一些人可能出于某些原因更喜欢从命令行界面使用 AVD。也许你有一些很棒的脚本，你想编写它们来设置一些出色的 AVD。本指南详细介绍了如何创建 AVD
    并直接从命令行启动它们。
- en: How to do it…
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Before you can create your own AVDs, you will need to specify some attributes
    for it; the most important one being the system image that will be used. To do
    so, execute the following steps:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建你自己的 AVD 之前，你需要为它指定一些属性；最重要的一个是将要使用的系统镜像。为此，执行以下步骤：
- en: 'You can find a list of the system images available to you by using the following
    command:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以使用以下命令找到可供你使用的系统镜像列表：
- en: '[PRE5]'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Or use the following command from the Windows terminal:'
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 或者在 Windows 终端中使用以下命令：
- en: '[PRE6]'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'As an example, enter the following into the command prompt:'
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 例如，在命令提示符中输入以下内容：
- en: '[PRE7]'
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: This command will list the system images available on your system. If you'd
    like more, you'll need to install them via the SDK manager. The pieces of information
    that you're looking for in this list are the target IDs because you'll need them
    to identify the system image, which you will need to specify in the next step.
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这个命令将列出你系统上可用的系统镜像。如果你想要更多，需要通过SDK管理器安装它们。在这份列表中你需要找的信息是目标ID，因为下一步你需要它们来识别系统镜像。
- en: 'Create the AVD using the following command:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令创建AVD：
- en: '[PRE8]'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: You will need to decide on a name for the AVD you've just created, which you
    will specify using the `–n` switch. The system image ID you selected from the
    previous step must be specified using the `–t` switch. If everything goes well,
    you should have just created a brand new virtual machine.
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你需要为新创建的AVD决定一个名称，通过`–n`开关来指定。你需要在上一步骤中选择系统镜像ID，使用`–t`开关来指定。如果一切顺利，你应该刚刚创建了一台全新的虚拟机。
- en: 'You can launch your brand new AVD using the following command:'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以使用以下命令启动全新的AVD：
- en: '[PRE9]'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Here, `[avd name]` is the AVD name you decided on in the previous step. If all
    goes well, your new AVD should start right up.
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在这里，`[avd name]`是你在上一步中决定的AVD名称。如果一切顺利，你新创建的AVD应该会立即启动。
- en: There's more…
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多…
- en: You probably want to know a little more about the commands. Regarding the emulator,
    it's capable of emulating a device with different configurations.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能想要了解更多关于命令的信息。关于模拟器，它能够模拟具有不同配置的设备。
- en: Emulating a memory card or an external storage
  id: totrans-139
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 模拟内存卡或外部存储
- en: 'You can specify that your virtual device also emulates some external storage
    using the `–c` options when you create it, as shown in the following command:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 当你创建虚拟设备时，可以使用`–c`选项指定它也模拟一些外部存储，如下面的命令所示：
- en: '[PRE10]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'For example, see the following command:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，请看以下命令：
- en: '[PRE11]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: You will obviously need to supply the size of your new emulated memory card.
    You also need to specify the unit by specifying either `K` for kilobytes or `M`
    for megabytes.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，你需要提供新模拟内存卡的大小。你还需要指定单位，通过指定`K`表示千字节或`M`表示兆字节。
- en: The partition sizes
  id: totrans-145
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 分区大小
- en: 'Another very useful thing that you may want to do is specify how much space
    you''d like to grant the internal storage partitions. You can do this by using
    the `-partition-size` switch, which you specify when you invoke the emulator as
    shown in the following command:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 另一件你可能想要做的事情是指定希望分配给内部存储分区的空间大小。你可以通过使用`-partition-size`开关来实现，如下面的命令所示，当你调用模拟器时指定：
- en: '[PRE12]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: You will also need to supply a size for the partitions. By default, the unit
    of measurement is megabytes (MBs).
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 你还需要为分区提供大小。默认情况下，测量单位是兆字节（MB）。
- en: See also
  id: totrans-149
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: 'There are many other options that you can make use of when it comes to the
    emulator. If you''re interested in learning more, check out the documents provided
    in the following links:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 在模拟器方面，还有许多其他选项可以利用。如果你有兴趣了解更多，请查看以下链接提供的文档：
- en: '[http://developer.android.com/tools/devices/managing-avds-cmdline.html](http://developer.android.com/tools/devices/managing-avds-cmdline.html)'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://developer.android.com/tools/devices/managing-avds-cmdline.html](http://developer.android.com/tools/devices/managing-avds-cmdline.html)'
- en: '[http://developer.android.com/tools/help/android.html](http://developer.android.com/tools/help/android.html)'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://developer.android.com/tools/help/android.html](http://developer.android.com/tools/help/android.html)'
- en: Using the Android Debug Bridge (ADB) to interact with the AVDs
  id: totrans-153
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Android调试桥（ADB）与AVD交互
- en: Interacting with the emulated Android device is one of the most important skills
    for both a developer and an Android security engineer/auditor. The **Android Debug
    Bridge** (**ADB**) provides the functionality needed to interact with the native-level
    components of an Android device. It allows the developers and security engineers
    to read the contents of the filesystem and interact with the package manager,
    application manager, kernel driver interfaces, and initialization scripts to mention
    a few.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 与模拟的Android设备交互是开发者和Android安全工程师/审计师最重要的技能之一。**Android调试桥**（**ADB**）提供了与Android设备本地级别组件交互所需的功能。它允许开发者和安全工程师读取文件系统的内容，并与包管理器、应用程序管理器、内核驱动接口和初始化脚本等进行交互，仅举几例。
- en: How to do it...
  id: totrans-155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Interacting with a virtual device using the ADB works as follows:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 使用ADB与虚拟设备交互的方法如下：
- en: 'You''ll need to start an AVD first or, if you like, simply plug in your own
    Android device via a USB to whatever machine you''d like to use—given that this
    machine has the SDK installed. You can start the AVD using the following command:'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你需要首先启动一个AVD，或者，如果你愿意，只需通过USB将你的Android设备连接到任何安装了SDK的机器上。你可以使用以下命令启动AVD：
- en: '[PRE13]'
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'We can list all the connected Android Devices by using the following command
    for a Windows machine:'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以使用以下命令列出所有连接的Android设备（针对Windows机器）：
- en: '[PRE14]'
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Or, if you''re using a Linux machine, use the following command:'
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 或者，如果你使用的是Linux机器，使用以下命令：
- en: '[PRE15]'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: This command should give you a list of the connected devices, which is basically
    all the devices that you will be able to connect to using ADB. You need to pay
    attention to the device names in the list. You will need to identify the devices
    when you launch a connection to them using ADB.
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这个命令会给你列出连接的设备列表，基本上就是你可以通过ADB连接的所有设备。你需要留意列表中的设备名称。当你使用ADB启动与它们的连接时，你需要识别这些设备。
- en: 'You can launch a shell connection to your Android device using the following
    command:'
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以使用以下命令向你的Android设备启动shell连接：
- en: '[PRE16]'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Or, if you happen to know that the Android device you want to connect to is
    the only emulated device, you can use the following command:'
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 或者，如果你恰好知道你想连接的Android设备是唯一的模拟设备，你可以使用以下命令：
- en: '[PRE17]'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Or, if the device is the only USB-connected device, you can use the following
    command:'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 或者，如果设备是唯一通过USB连接的设备，你可以使用以下命令：
- en: '[PRE18]'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The switches `–d`, `-e`, and `-p` apply to the other ADB commands and not just
    the shell. If this works well, you should see a prompt string—the string displayed
    to identify the command shell being used—similar to the following command:'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 开关 `–d`、`-e` 和 `-p` 同样适用于其他ADB命令，不仅仅是shell。如果这操作顺利，你应该会看到类似以下命令的提示字符串——用于标识正在使用的命令shell的字符串：
- en: '[PRE19]'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: You should now have a full-fledged shell with some of the traditional Unix/Linux
    commands and utilities at your finger tips. Try searching around on the filesystem
    and getting to know where everything is kept.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你应该拥有一个功能齐全的shell，其中包含一些传统的Unix/Linux命令和工具。在你的指尖尝试搜索文件系统，了解所有内容的位置。
- en: There's more…
  id: totrans-173
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多…
- en: 'Now that you have a connected device, you''ll need to know a little bit about
    navigating the Android filesystem and making use of the commands. Here''s a small
    list to get you started:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 既然你已经连接了一个设备，你需要了解一些关于导航Android文件系统和使用命令的知识。以下是一个帮助你开始的小列表：
- en: '`ls {path}`: This will list the contents of the directory at the path'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ls {path}`: 这将列出指定路径目录的内容'
- en: '`cat {file}`: This will print the contents of a text file on the screen'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cat {file}`: 这将在屏幕上打印文本文件的内容'
- en: '`cd {path}`: This will change the working directory to the one pointed to by
    the path'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cd {path}`: 这将改变当前工作目录到指定路径的目录'
- en: '`cd ../`: This changes the working directory to the one that''s exactly one
    level higher'
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cd ../`: 这将改变当前工作目录到刚好高一级的目录'
- en: '`pwd`: This prints the current working directory'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pwd`: 这将打印当前工作目录'
- en: '`id`: This checks your user ID'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`id`: 这将检查你的用户ID'
- en: See also
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: '[http://developer.android.com/tools/help/adb.html](http://developer.android.com/tools/help/adb.html)'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://developer.android.com/tools/help/adb.html](http://developer.android.com/tools/help/adb.html)（该链接无需翻译，保留英文）'
- en: Copying files off/onto an AVD
  id: totrans-183
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在AVD上复制文件
- en: 'In your upcoming adventures with the Android platform, you may want to at some
    point copy things off your Android devices, whether they are emulators or not.
    Copying files is pretty simple. All you need is the following:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在你即将进行的Android平台冒险中，你可能会想要在某些时刻从Android设备（无论它们是不是模拟器）上复制东西。复制文件相当简单。你需要的是以下内容：
- en: A connected device you'd like to have
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你希望连接的设备
- en: A file you'd like to copy off/on
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你想要复制到/从设备上复制的文件
- en: A place you'd like to put this file in
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你想要放置这个文件的位置
- en: How to do it...
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'To access files on your Android device using the ADB, you need to do the following:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用ADB访问你Android设备上的文件，你需要执行以下操作：
- en: 'It''s actually pretty simple to do this. You''ll need to fire off the following
    command from your command-line interface:'
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 实际上这个过程相当简单。你需要从命令行界面执行以下命令：
- en: '[PRE20]'
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'To copy files onto an AVD, you can use the following command:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要将文件复制到AVD上，你可以使用以下命令：
- en: '[PRE21]'
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Installing applications onto the AVDs via ADB
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过ADB向AVD安装应用程序
- en: There may be times when you need to install **Application Packages** (**APKs**)
    on your local filesystem to an emulator or device that you own. Often Android-based
    security tools aren't available on the Play Store—because they would expose unruly
    users to too much risk or be abused by malware—and need to be installed manually.
    Also, you will probably be developing applications and Android native binaries
    to demonstrate and verify exploits.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 有时你可能需要将本地文件系统上的**应用安装包**（**APKs**）安装到你自己拥有的模拟器或设备上。通常基于Android的安全工具在Play商店中无法获取——因为它们可能会让不守规矩的用户面临过多风险，或者被恶意软件滥用——需要手动安装。此外，你可能还需要开发和Android原生二进制文件来演示和验证漏洞利用。
- en: How to do it...
  id: totrans-196
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Installing an APK using ADB can be done in the following ways:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 使用ADB安装APK可以通过以下方式完成：
- en: 'You will need to actually know where the APK is on your local machine, and
    when you find it, you can substitute it with `path` as shown in the following
    command:'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你需要知道APK在你本地机器上的具体位置，找到后，你可以像下面这个命令一样，用`path`来替换它：
- en: '[PRE22]'
  id: totrans-199
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'You can also use the device-specific commands to narrow down the device you
    want to install it onto. You can use the following command:'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你还可以使用针对特定设备的命令来缩小你想安装的目标设备。你可以使用以下命令：
- en: '[PRE23]'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
