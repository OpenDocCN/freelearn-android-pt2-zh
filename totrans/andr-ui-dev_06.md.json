["```kt\npublic class ValidatingDatePickerDialog extends DatePickerDialog {\n\n    private int lastValidYear;\n    private int lastValidMonth;\n    private int lastValidDay;\n    private ValidationCallback callback = null;\n\n    public ValidatingDatePickerDialog(\n            final Context context,\n            final OnDateSetListener callBack,\n            final int year,\n            final int monthOfYear,\n            final int dayOfMonth) {\n\n        super(context, callBack, year, monthOfYear, dayOfMonth);\n        setValidData(year, monthOfYear, dayOfMonth);\n    }\n\n protected void setValidData(\n final int year,\n final int monthOfYear,\n final int dayOfMonth) {\n\n lastValidYear = year;\n lastValidMonth = monthOfYear;\n lastValidDay = dayOfMonth;\n }\n\n    @Override\n    public void onDateChanged(\n            final DatePicker view,\n            final int year,\n            final int month,\n            final int day) {\n\n        if(callback != null && !callback.isValid(year, month, day)) {\n view.updateDate(\n lastValidYear,\n lastValidMonth,\n lastValidDay);\n        } else {\n            super.onDateChanged(view, year, month, day);\n            setValidData(year, month, day);\n        }\n    }\n\n    public void setValidationCallback(\n            final ValidationCallback callback) {\n        this.callback = callback;\n    }\n\n    public ValidationCallback getValidationCallback() {\n        return callback;\n    }\n\n    public interface ValidationCallback {\n        boolean isValid(int year, int monthOfYear, int dayOfMonth);\n    }\n}\n```", "```kt\nIntent result = new Intent();\nresult.putExtra(\"paymentDetails\", paymentDetails);\nsetResult(RESULT_OK, result);\n```", "```kt\n    android create project -n Selector -p Selector -k com.packtpub.selector -a ListItemSelectionActivity -t 3\n    ```", "```kt\n    <LinearLayout\n\n        android:orientation=\"vertical\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"fill_parent\">\"\n    ```", "```kt\n    <EditText android:id=\"@+id/input\"\n              android:inputType=\"textFilter\"\n              android:layout_width=\"fill_parent\"\n              android:layout_height=\"wrap_content\"/>\n    ```", "```kt\n    <ListView android:id=\"@+id/list\"\n              android:layout_width=\"fill_parent\"\n              android:layout_height=\"fill_parent\"/>\n    ```", "```kt\n    private ListAdapter adapter;\n    ```", "```kt\n    private Filter filter;\n    ```", "```kt\n    setContentView(R.layout.main);\n    ```", "```kt\n    ListView list = (ListView)findViewById(R.id.list);\n    ```", "```kt\n    EditText input = (EditText)findViewById(R.id.input);\n    ```", "```kt\n    private ListAdapter createArrayAdapter(Intent intent) {\n    ```", "```kt\n    Object[] data = (Object[])intent.getSerializableExtra(\"data\");\n    ```", "```kt\n    if(data != null && data.length > 0) {\n    return new ArrayAdapter<Object>(\n        this,\n        android.R.layout.simple_list_item_1,\n        data);\n    ```", "```kt\n    else {\n        throw new IllegalArgumentException(\n                \"no list data specified in Intent: \"\n                + intent);\n    }\n    ```", "```kt\n    private String getColumnName(\n            final Intent intent,\n            String primary,\n            String secondary,\n            String def) {\n    ```", "```kt\n    String col = intent.getStringExtra(primary);\n    ```", "```kt\n    if(col == null) {\n        col = intent.getStringExtra(secondary);\n    }\n    ```", "```kt\n    if(col == null) {\n        col = def;\n    }\n    ```", "```kt\n    return col;\n    ```", "```kt\n    private ListAdapter createCursorAdapter(Intent intent) {\n    ```", "```kt\n    final String line1 = getColumnName(intent, \"name\", \"line1\", \"name\");\n    ```", "```kt\n    String line2 = getColumnName(\n            intent, \"description\", \"line2\", null);\n    ```", "```kt\n    int listItemResource;\n    final String[] columns;\n    String[] displayColumns;\n    int[] textIds;\n    ```", "```kt\n    if(line2 != null) {\n    ```", "```kt\n    listItemResource = android.R.layout.two_line_list_item;\n    ```", "```kt\n    columns = new String[]{\"_id\", line1, line2};\n    ```", "```kt\n    displayColumns = new String[]{line1, line2};\n    ```", "```kt\n    textIds = new int[]{android.R.id.text1, android.R.id.text2};\n    ```", "```kt\n    else {\n    listItemResource = android.R.layout.simple_list_item_1;\n    ```", "```kt\n    columns = new String[]{\"_id\", line1};\n    ```", "```kt\n    displayColumns = new String[]{line1};\n    ```", "```kt\n    textIds = null;\n    ```", "```kt\n    Cursor cursor = managedQuery(\n            intent.getData(),\n            columns,\n            null,\n            null,\n            line1);\n    ```", "```kt\n    CursorAdapter cursorAdapter = new SimpleCursorAdapter(\n            this,\n            listItemResource,\n            cursor,\n            displayColumns,\n            textIds);\n    ```", "```kt\n    cursorAdapter.setFilterQueryProvider(\n            new FilterQueryProvider() {\n    ```", "```kt\n    public Cursor runQuery(CharSequence constraint) {\n    ```", "```kt\n    return managedQuery(\n            intent.getData(),\n            columns,\n            line1 + \" LIKE ?\",\n            new String[] {constraint.toString() + '%'},\n            line1);\n    ```", "```kt\n    return cursorAdapter;\n    ```", "```kt\n    protected ListAdapter createListAdapter() {\n    ```", "```kt\n    Intent intent = getIntent();\n    ```", "```kt\n    if(intent.getData() != null) {\n    return createCursorAdapter(intent);\n\n    else {\n        return createArrayAdapter(intent);\n    }\n    ```", "```kt\n    adapter = createListAdapter();\n    ```", "```kt\n    filter = ((Filterable)adapter).getFilter();\n    ```", "```kt\n    list.setAdapter(adapter);\n    ```", "```kt\n    public class ListItemSelectionActivity extends Activity\n            implements TextWatcher\n    ```", "```kt\n    input.addTextChangedListener(this);\n    ```", "```kt\n    public void beforeTextChanged(\n            CharSequence s,\n            int start,\n            int count,\n            int after) {\n    }\n\n    public void onTextChanged(\n            CharSequence s,\n            int start,\n            int count,\n            int after) {\n    }\n    ```", "```kt\n    public void afterTextChanged(Editable s) {\n    ```", "```kt\n    filter.filter(s);\n    ```", "```kt\n    public class ListItemSelectionActivity extends Activity\n            implements TextWatcher, OnItemClickListener {\n    ```", "```kt\n    list.setOnItemClickListener(this);\n    ```", "```kt\n    public void onItemClick(\n            AdapterView<?> parent,\n            View clicked,\n            int position,\n            long id) {\n    ```", "```kt\n    Intent data = new Intent();\n    ```", "```kt\n    if(adapter instanceof CursorAdapter) {\n    data.putExtra(\"selection\", id);\n    ```", "```kt\n    else {\n        data.putExtra(\n                \"selection\",\n                (Serializable)parent.getItemAtPosition(position));\n    }\n    ```", "```kt\n    setResult(RESULT_OK, data);\n    ```", "```kt\n    finish();\n    ```", "```kt\nintent.putExtra(\"data\", new String[] {\n    \"Blue\",\n    \"Green\",\n    \"Red\",// more colors    \n});\nstartActivityForResult(intent, 101);\n```", "```kt\n@Override\nprotected void onActivityResult(\n        int requestCode,\n        int resultCode,\n        Intent data) {\n\n    super.onActivityResult(requestCode, resultCode, data);\n\n    if(requestCode == 101 && resultCode == RESULT_OK) {\n        Object obj = data.getSerializableExtra(\"selection\");\n        Toast.makeText(\n                this,\n                String.valueOf(obj),\n                Toast.LENGTH_LONG).show();\n    }\n}\n```", "```kt\nIntent intent = new Intent(\n        this,\n        ListItemSelectionActivity.class);\n\nintent.setData(People.CONTENT_URI);\nintent.putExtra(\"line1\", People.NAME);\nintent.putExtra(\"line2\", People.NUMBER);\n\nstartActivityForResult(intent, 202);\n```"]