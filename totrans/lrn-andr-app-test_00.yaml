- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: It doesn't matter how much time you invest in Android design, or even how careful
    you are when programming, mistakes are inevitable and bugs will appear. This book
    will help you minimize the impact of these errors in your Android project and
    increase your development productivity. It will show you the problems that are
    easily avoided, to help get you quickly to the testing stage.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 无论您在Android设计上投入多少时间，甚至在编程时多么小心，错误是不可避免的，bug也会出现。这本书将帮助您最小化这些错误对您的Android项目的影响，并提高您的开发生产力。它将向您展示那些容易避免的问题，帮助您快速进入测试阶段。
- en: '*Android Application Testing Guide* is the first and only book providing a
    practical introduction to the most commonly available techniques, frameworks,
    and tools to improve the development of your Android applications. Clear, step-by-step
    instructions show how to write tests for your applications and assure quality
    control using various methodologies.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 《Android应用测试指南》是第一本也是唯一一本提供实用介绍的书，旨在通过使用各种方法提高您的Android应用程序开发，介绍最常见的技术、框架和工具。
- en: The author's experience in applying application testing techniques to real-world
    projects enables him to share insights on creating professional Android applications.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 作者在将应用测试技术应用于实际项目方面的经验，使他能够分享关于创建专业级Android应用程序的见解。
- en: The book covers the basics of framework support for tests to architectures and
    techniques such as Test-driven Development, which is an agile component of the
    software development process and a technique where you will tackle bugs early
    on. From the most basic unit tests applied to a sample project to more sophisticated
    performance tests, this book provides a detailed description of the most widely
    used techniques in the Android testing world in a recipe-based approach.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本书涵盖了测试框架支持的基础知识，以及如测试驱动开发（Test-driven Development）等架构和技术，这是软件开发过程中的一个敏捷组成部分，也是一项早期解决错误的技术。从应用于示例项目最基本的单元测试到更复杂的性能测试，这本书以食谱式的方法提供了Android测试领域中最广泛使用技术的详细描述。
- en: The author has extensive experience of working on various development projects
    throughout his professional career. All this research and knowledge has helped
    create a book that will serve as a useful resource to any developer navigating
    the world of Android testing.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 作者在其职业生涯中参与了各种开发项目，拥有丰富的经验。所有这些研究和知识都有助于创作一本对任何开发者在Android测试世界中导航都有用的资源书。
- en: What this book covers
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书内容涵盖
- en: '[Chapter 1](part0014_split_000.html#page "Chapter 1. Getting Started with Testing"),
    *Getting Started with Testing*, introduces the different types of testing and
    their applicability to software development projects in general and to Android
    in particular. It then goes on to cover testing on the Android platform, unit
    testing and JUnit, creating an Android test project and running tests.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[第1章](part0014_split_000.html#page "第1章. 测试入门")，*测试入门*，介绍了不同类型的测试及其一般适用于软件开发项目，特别是Android。然后继续讲述Android平台上的测试、单元测试和JUnit、创建Android测试项目并运行测试。'
- en: '[Chapter 2](part0020_split_000.html#page "Chapter 2. Understanding Testing
    with the Android SDK"), *Understanding Testing with the Android SDK*, starts digging
    a bit deeper to recognize the building blocks available to create the tests. It
    covers Assertions, TouchUtils, which are intended to test user interfaces, mock
    objects, instrumentation, and TestCase class hierarchies.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[第2章](part0020_split_000.html#page "第2章. 使用Android SDK理解测试")，*使用Android SDK理解测试*，开始更深入地识别可用于创建测试的构建块。它涵盖了断言、TouchUtils（用于测试用户界面）、模拟对象、测试仪器和TestCase类层次结构。'
- en: '[Chapter 3](part0037_split_000.html#page "Chapter 3. Baking with Testing Recipes"),
    *Baking with Testing Recipes*, provides practical examples of different situations
    you will commonly encounter while applying the disciplines and techniques described
    before. The examples are presented in a cookbook style so you can adapt and use
    them for your projects. The recipes cover Android unit tests, activities, applications,
    databases and ContentProviders, services, UIs, exceptions, parsers, memory leaks,
    and a look at testing with Espresso.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[第3章](part0037_split_000.html#page "第3章. 使用测试食谱烘焙")，*使用测试食谱烘焙*，提供了在应用前面描述的纪律和技术时通常会遇到的常见情况的实用示例。这些示例以食谱风格呈现，以便您可以根据自己的项目进行改编和使用。这些食谱涵盖了Android单元测试、活动、应用程序、数据库和ContentProviders、服务、UI、异常、解析器、内存泄漏，以及使用Espresso进行测试的探讨。'
- en: '[Chapter 4](part0049_split_000.html#page "Chapter 4. Managing Your Android
    Testing Environment"), *Managing Your Android Testing Environment*, provides different
    conditions to run the tests. It starts with the creation of the Android Virtual
    Devices (AVD) to provide different conditions and configurations for the application
    under test and runs the tests using the available options. Finally, it introduces
    monkey as a way to generate simulated events used for testing.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[第4章](part0049_split_000.html#page "Chapter 4. Managing Your Android Testing
    Environment")，*管理你的 Android 测试环境*，提供了不同的条件来运行测试。它从创建 Android 虚拟设备（AVD）开始，为被测应用程序提供不同的条件和配置，并使用可用选项运行测试。最后，它引入了猴子作为生成用于测试的模拟事件的方式。'
- en: '[Chapter 5](part0057_split_000.html#page "Chapter 5. Discovering Continuous
    Integration"), *Discovering Continuous Integration*, introduces this agile technique
    for software engineering and automation that aims to improve the software quality
    and reduce the time taken to integrate changes by continuously applying integration
    and testing frequently.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[第5章](part0057_split_000.html#page "Chapter 5. Discovering Continuous Integration")，*探索持续集成*，介绍了这种敏捷软件工程和自动化技术，旨在通过持续集成和频繁测试来提高软件质量并减少集成更改所需的时间。'
- en: '[Chapter 6](part0061_split_000.html#page "Chapter 6. Practicing Test-driven
    Development"), *Practicing Test-driven Development*, introduces the Test-driven
    Development discipline. It starts with a general revision and later on moves to
    the concepts and techniques closely related to the Android platform. This is a
    code-intensive chapter.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[第6章](part0061_split_000.html#page "Chapter 6. Practicing Test-driven Development")，*实践测试驱动开发*，介绍了测试驱动开发这一纪律。它从一般性复习开始，随后转移到与
    Android 平台紧密相关 concepts 概念和技巧。这是一个代码密集型的章节。'
- en: '[Chapter 7](part0068_split_000.html#page "Chapter 7. Behavior-driven Development"),
    *Behavior-driven Development*, introduces Behavior-driven Development and some
    concepts, such as the use of a common vocabulary to express the tests and the
    inclusion of business participants in the software development project.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[第7章](part0068_split_000.html#page "Chapter 7. Behavior-driven Development")，*行为驱动开发*，介绍了行为驱动开发以及一些概念，例如使用通用词汇表达测试，以及将业务参与者包括在软件开发项目中。'
- en: '[Chapter 8](part0072_split_000.html#page "Chapter 8. Testing and Profiling
    Performance"), *Testing and Profiling Performance*, introduces a series of concepts
    related to benchmarking and profiles from traditional logging statement methods
    to creating Android performance tests and using profiling tools.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[第8章](part0072_split_000.html#page "Chapter 8. Testing and Profiling Performance")，*测试和性能分析*，介绍了一系列与基准测试和性能分析相关的概念，从传统的日志语句方法到创建
    Android 性能测试并使用分析工具。'
- en: '[Chapter 9](part0079_split_000.html#page "Chapter 9. Alternative Testing Tactics"),
    *Alternative Testing Tactics*, covers adding code coverage to ensure you know
    what is tested and what isn''t, as well as testing on the host''s Java Virtual
    Machine, investigating Fest, Spoon, and the future of Android testing to build
    upon and expand your Android testing range.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[第9章](part0079_split_000.html#page "Chapter 9. Alternative Testing Tactics")，*替代测试策略*，涵盖了添加代码覆盖率以确保你知道哪些已测试哪些未测试，以及在宿主的
    Java 虚拟机上测试，研究 Fest、Spoon 以及 Android 测试的未来，以构建和扩展你的 Android 测试范围。'
- en: What you need for this book
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 你需要为这本书准备的内容。
- en: To be able to follow the examples in the different chapters, you need a common
    set of software and tools installed and several other components that are described
    in every chapter in particular, including their respective download locations.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 为了能够跟随不同章节中的示例，你需要安装一组常见的软件和工具，以及每个章节特别描述的其他组件，包括它们的下载位置。
- en: 'All the examples are based on the following:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 所有示例基于以下内容：
- en: Mac OSX 10.9.4, fully updated
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mac OSX 10.9.4，已完全更新
- en: Java SE version 1.6.0_24 (build 1.6.0_24-b07)
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Java SE 版本 1.6.0_24（构建版本 1.6.0_24-b07）
- en: Android SDK tools, revision 24
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Android SDK 工具，版本 24
- en: Android SDK platform-tools, revision 21
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Android SDK 平台工具，版本 21
- en: SDK platform Android 4.4, API 20
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SDK 平台 Android 4.4，API 20
- en: Android support library, revision 21
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Android 支持库，版本 21
- en: 'Android Studio IDE, Version: 1.1.0'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Android Studio IDE，版本：1.1.0
- en: Gradle version 2.2.1
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Gradle 版本 2.2.1
- en: Git version 1.8.5.2
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Git 版本 1.8.5.2
- en: Who this book is for
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书的目标读者
- en: If you are an Android developer looking to test your applications or optimize
    your application development process, then this book is for you. No previous experience
    in application testing is required.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你是一个希望测试应用程序或优化应用开发流程的 Android 开发者，那么这本书就是为你而写的。不需要有应用程序测试的先前经验。
- en: Conventions
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 约定
- en: In this book, you will find a number of styles of text that distinguish between
    different kinds of information. Here are some examples of these styles, and an
    explanation of their meaning.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，你会发现多种文本样式，用于区分不同类型的信息。以下是一些样式示例及其含义的解释。
- en: 'Code words in text are shown as follows: "To invoke the `am` command we will
    be using the `adb` `shell` command".'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 文本中的代码字词如下所示："要调用`am`命令，我们将使用`adb` `shell`命令"。
- en: 'A block of code is set as follows:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE0]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望引起你对代码块中某个特定部分的注意时，相关的行或项目会以粗体显示：
- en: '[PRE1]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都如下写出：
- en: '[PRE2]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**New terms** and **important words** are shown in bold. Words that you see
    on the screen, in menus or dialog boxes for example, appear in the text like this:
    "The first test performs a click on the **Go** button of the Forwarding Activity."'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '**新术语**和**重要词汇**以粗体显示。你在屏幕上看到的内容，例如菜单或对话框中的单词，会像这样出现在文本中："第一个测试执行了对Forwarding
    Activity的**Go**按钮的点击。"'
- en: Note
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Warnings or important notes appear in a box like this.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 警告或重要说明会像这样出现在一个框中。
- en: Tip
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Tips and tricks appear like this.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 提示和技巧会像这样出现。
- en: Reader feedback
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 读者反馈
- en: Feedback from our readers is always welcome. Let us know what you think about
    this book—what you liked or disliked. Reader feedback is important for us as it
    helps us develop titles that you will really get the most out of.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们非常欢迎读者的反馈。告诉我们你对这本书的看法——你喜欢或不喜欢的地方。读者的反馈对我们很重要，因为它能帮助我们开发出你真正能从中获益的图书。
- en: To send us general feedback, simply e-mail `<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`,
    and mention the book's title in the subject of your message.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 如需向我们发送一般反馈，只需将邮件发送至`<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`，并在邮件的主题中提及书籍的标题。
- en: If there is a topic that you have expertise in and you are interested in either
    writing or contributing to a book, see our author guide at [www.packtpub.com/authors](http://www.packtpub.com/authors).
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在一个主题上有专业知识，并且有兴趣撰写或参与书籍编写，请查看我们的作者指南：[www.packtpub.com/authors](http://www.packtpub.com/authors)。
- en: Customer support
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 客户支持
- en: Now that you are the proud owner of a Packt book, we have a number of things
    to help you to get the most from your purchase.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 既然你现在拥有了Packt的一本书，我们有一些事情可以帮助你最大限度地利用你的购买。
- en: Downloading the example code
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 下载示例代码
- en: You can download the example code files from your account at [http://www.packtpub.com](http://www.packtpub.com)
    for all the Packt Publishing books you have purchased. If you purchased this book
    elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以从你在[http://www.packtpub.com](http://www.packtpub.com)的账户下载你所购买的所有Packt Publishing书籍的示例代码文件。如果你在其他地方购买了这本书，可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)注册，我们会直接将文件通过电子邮件发送给你。
- en: Errata
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 勘误
- en: Although we have taken every care to ensure the accuracy of our content, mistakes
    do happen. If you find a mistake in one of our books—maybe a mistake in the text
    or the code—we would be grateful if you could report this to us. By doing so,
    you can save other readers from frustration and help us improve subsequent versions
    of this book. If you find any errata, please report them by visiting [http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata),
    selecting your book, clicking on the **Errata Submission Form** link, and entering
    the details of your errata. Once your errata are verified, your submission will
    be accepted and the errata will be uploaded to our website or added to any list
    of existing errata under the Errata section of that title.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我们已经尽力确保内容的准确性，但错误仍然会发生。如果你在我们的书中发现了一个错误——可能是文本或代码中的错误——如果你能向我们报告，我们将不胜感激。这样做，你可以避免其他读者的困扰，并帮助我们改进本书后续版本。如果你发现任何勘误，请通过访问[http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)，选择你的书籍，点击**Errata
    Submission Form**链接，并输入你的勘误详情。一旦你的勘误被验证，你的提交将被接受，勘误将被上传到我们的网站或添加到该标题下现有勘误列表中。
- en: To view the previously submitted errata, go to [https://www.packtpub.com/books/content/support](https://www.packtpub.com/books/content/support)
    and enter the name of the book in the search field. The required information will
    appear under the **Errata** section.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 若要查看之前提交的勘误信息，请访问[https://www.packtpub.com/books/content/support](https://www.packtpub.com/books/content/support)，在搜索栏中输入书籍名称。所需信息将在**勘误**部分显示。
- en: Piracy
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 盗版
- en: Piracy of copyrighted material on the Internet is an ongoing problem across
    all media. At Packt, we take the protection of our copyright and licenses very
    seriously. If you come across any illegal copies of our works in any form on the
    Internet, please provide us with the location address or website name immediately
    so that we can pursue a remedy.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在互联网上，版权材料的盗版问题在所有媒体中持续存在。Packt出版社非常重视我们版权和许可的保护。如果您在任何形式的互联网上发现我们作品非法复制的版本，请立即提供其位置地址或网站名称，以便我们可以采取补救措施。
- en: Please contact us at `<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`
    with a link to the suspected pirated material.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您发现任何涉嫌盗版的材料，请通过`<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`联系我们，并提供相关链接。
- en: We appreciate your help in protecting our authors and our ability to bring you
    valuable content.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 我们感谢您帮助保护我们的作者以及我们为您提供有价值内容的能力。
- en: Questions
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题咨询
- en: If you have a problem with any aspect of this book, you can contact us at `<[questions@packtpub.com](mailto:questions@packtpub.com)>`,
    and we will do our best to address the problem.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您对这本书的任何方面有疑问，可以通过`<[questions@packtpub.com](mailto:questions@packtpub.com)>`联系我们，我们将尽力解决问题。
- en: Questions
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题咨询
- en: You can contact us at `<[questions@packtpub.com](mailto:questions@packtpub.com)>`
    if you are having a problem with any aspect of the book, and we will do our best
    to address it.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在阅读本书的任何部分遇到问题，可以通过`<[questions@packtpub.com](mailto:questions@packtpub.com)>`联系我们，我们将尽我们所能予以解决。
