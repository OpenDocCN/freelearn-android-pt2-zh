- en: Chapter 8. Dialogs with Virtual Personal Assistants
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第8章。与虚拟个人助理的对话
- en: In this chapter you will learn how to design and develop three types of **Virtual
    Personal Assistant** (**VPA**); a conversational companion that can chat about
    a range of everyday topics, a specialist VPA that provides answers to **Frequently
    Asked Questions** (**FAQs**) in the domain of Type 2 diabetes, and a conversational
    companion enhanced with the ability to execute search queries, control device
    apps, and make calls to web services.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将学习如何设计和开发三种类型的**虚拟个人助理**（**VPA**）；一种可以就一系列日常话题进行对话的交谈式伴侣，一种提供类型2糖尿病领域**常见问题解答**（**FAQs**）的专业VPA，以及一种增强了执行搜索查询、控制设备应用和调用网络服务能力的交谈式伴侣。
- en: By the end of this chapter, you should have an understanding of what is required
    to develop each type of VPA.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章结束时，你应该了解开发每种类型VPA所需的内容。
- en: The technology of VPA
  id: totrans-3
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: VPA的技术要求
- en: 'VPAs are generally able to perform the following tasks:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: VPAs通常能够执行以下任务：
- en: Interacting with web services to retrieve information and perform transactions;
    either through search queries, by linking to knowledge bases such as Knowledge
    Graph, or by engaging in transactional dialogs as well as launching and managing
    apps on the device, such as contacts, calendar, SMS, or clock.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与网络服务互动以获取信息并执行交易；通过搜索查询，链接到如知识图谱之类的知识库，或参与交易性对话以及启动和管理设备上的应用，如联系人、日历、短信或时钟。
- en: Engaging in conversation with the user about random topics, for example, answering
    questions such as *where do you live?*, *how old are you?*, *what languages do
    you speak?*, or *what sort of music do you like?*. The VPA is expected to provide
    some sort of response to every question so as to be able to keep the conversation
    going even if it does not have a proper answer to the question.
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 就随机话题与用户进行对话，例如回答诸如*你住在哪里？*、*你多大了？*、*你说什么语言？*或*你喜欢什么类型的音乐？*等问题。VPA需要为每个问题提供某种形式的回应，以使对话能够持续进行，即使它没有对问题的正确答案。
- en: The `VoiceLaunch` app presented in [Chapter 4](ch04.html "Chapter 4. Simple
    Voice Interactions"), *Simple Voice Interactions* shows how to launch an app on
    a device, while the `MusicBrain` app presented in [Chapter 5](ch05.html "Chapter 5. Form-filling
    Dialogs"), *Form-filling Dialogs* shows how to implement a transactional dialog
    using form-filling. The multimodal app presented in [Chapter 7](ch07.html "Chapter 7. Multilingual
    and Multimodal Dialogs"), *Multilingual and Multimodal Dialogs* showed unimodal
    as well as multimodal dialogs. However, these apps perform a single task, whereas
    a VPA performs a range of different tasks.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[第4章](ch04.html "第4章. 简单语音交互")中展示的`VoiceLaunch`应用，*简单语音交互*演示了如何在设备上启动一个应用，而[第5章](ch05.html
    "第5章. 表单填充对话")中展示的`MusicBrain`应用，*表单填充对话*展示了如何实现使用表单填充的交易性对话。[第7章](ch07.html "第7章.
    多语言和多模态对话")中的多模态应用，*多语言和多模态对话*展示了单模态以及多模态对话。然而，这些应用仅执行单一任务，而VPA执行一系列不同的任务。'
- en: The challenge for a VPA is to determine from the user's utterance what task
    the user is requesting. Looking at the data flow in the following figure, we know
    how to use speech recognition to determine the words that the user has spoken
    ([Chapter 3](ch03.html "Chapter 3. Speech Recognition"), *Speech Recognition*),
    and how to give a response, given a string of words to speak ([Chapter 2](ch02.html
    "Chapter 2. Text-to-Speech Synthesis"), *Text-To-Speech Synthesis*). Now, we need
    to figure out the intention behind the words spoken by the user and put together
    the words to be spoken by the TTS. Determining the user's intention can be done
    using techniques from spoken language understanding, as shown in [Chapter 6](ch06.html
    "Chapter 6. Grammars for Dialog"), *Grammars for Dialog*, although in this chapter
    we will look at an alternative technique. Providing the words to be spoken by
    the TTS will be explained when we look at how responses are generated by the dialog
    management component.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 对于虚拟个人助手（VPA）的挑战是从用户的语音中确定用户请求的任务。观察下面图中的数据流，我们知道如何使用语音识别来确定用户说出的单词（[第3章](ch03.html
    "第3章. 语音识别"), *语音识别*），以及给定一组要说的单词如何给出回应（[第2章](ch02.html "第2章. 文本到语音合成"), *文本到语音合成*）。现在，我们需要弄清楚用户所说单词背后的意图，并组织TTS要说的单词。可以使用来自口语理解的技术来确定用户的意图，如[第6章](ch06.html
    "第6章. 对话语法")，*对话语法*所示，尽管在本章中我们将探讨一种替代技术。当我们在对话管理组件中查看回应是如何生成的时候，将解释提供TTS要说的单词。
- en: '![The technology of VPA](img/5297_08_01.jpg)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![VPA的技术](img/5297_08_01.jpg)'
- en: Determining the user's intention
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 确定用户意图
- en: 'Imagine the following user inputs:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 想象以下用户输入：
- en: '*I would like to book a flight to London.*'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*我想预订一张飞往伦敦的机票。*'
- en: '*What''s the weather forecast for tomorrow?*'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*明天的天气预报是什么？*'
- en: '*Set my alarm for 7.30 tomorrow.*'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*明天早上7.30叫我起床。*'
- en: '*What sort of a computer are you?*'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*你是什么类型的电脑？*'
- en: Suppose we wish to map these inputs on to the four functions listed in the dialog
    management box in the previous figure. How can we do this?
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们希望将这些输入映射到前一个图中的对话管理框列出的四个功能上。我们该如何操作？
- en: 'One way is to use a statistical classification system to classify open-ended
    user input into a fixed set of classes, as illustrated in the statistical grammar
    in [Chapter 6](ch06.html "Chapter 6. Grammars for Dialog"), *Grammars for Dialog*.
    This is the approach taken in large scale commercial systems. For example, a troubleshooting
    application might take inputs such as the following:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 一种方法是使用统计分类系统将开放式的用户输入分类到一组固定的类别中，如[第6章](ch06.html "第6章. 对话语法")中的统计语法所示，*对话语法*。这是大规模商业系统采用的方法。例如，故障排除应用程序可能会接收如下输入：
- en: '*I can''t access my e-mail*'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*我无法访问我的电子邮件*'
- en: '*I can''t get on to the Internet*'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*我上不了互联网*'
- en: '*There''s a little icon that says no Internet access*'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*有一个小图标显示没有互联网访问*'
- en: Although these inputs are phrased differently, they could all be classified
    as problems to do with Internet connectivity. Creating such a statistical classification
    system involves collecting a large set of relevant utterances and determining
    a fixed set of classes. Features such as the occurrence of particular keywords
    or phrases are identified that can predict the assignment of an utterance to a
    particular class and machine learning techniques would be employed to train the
    classifier. For example, the occurrence of phrases such as *access my e-mail*
    or *get on the Internet* could be taken as features that indicate the class *problem
    with Internet connection*.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这些输入表达方式不同，但它们都可以被归类为与互联网连接相关的问题。创建这样的统计分类系统需要收集大量相关的语音数据，并确定一组固定的类别。识别出可以预测将语音分配给特定类别特征，如特定关键词或短语的出现，将使用机器学习技术来训练分类器。例如，短语如*访问我的电子邮件*或*上网*可以作为指示*互联网连接问题*类别的特征。
- en: The advantages of this approach are robustness and coverage. As the matching
    is statistical, it is possible to classify input that might not match a category
    exactly. Thus, ungrammatical input or input that can be expressed in different
    ways can still be assigned to a class. Handcrafting a grammar to classify such
    open-ended input would be a daunting task as in this case, the matching would
    have to be exact.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法的优点是健壮性和覆盖面。由于匹配是统计的，因此可以对可能不完全匹配类别的输入进行分类。因此，即使是非语法输入或可以用不同方式表达输入，仍然可以分配给一个类别。手工制作语法来分类这种开放式的输入将是一项艰巨的任务，因为在这种情况下，匹配必须是精确的。
- en: The downside of statistical text classification is that a large sample of utterances
    is required to train the system since there are so many different ways to say
    something. In a large system, tens of thousands of typical utterances might need
    to be collected and annotated to provide adequate coverage. This is an expensive
    process; although once a system has been trained, it will generally produce accurate
    results.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 统计文本分类的缺点是，需要大量的话语样本来训练系统，因为表达同一件事情的方式有很多种。在一个大系统中，可能需要收集和注释成千上万种典型的话语才能提供足够的覆盖面。这是一个昂贵的流程；尽管一旦系统经过训练，通常会产生准确的结果。
- en: A second approach, which would be feasible in situations where the input is
    more constrained and predictable, would be to write grammars to perform the classification,
    using the techniques illustrated in [Chapter 6](ch06.html "Chapter 6. Grammars
    for Dialog"), *Grammars for Dialog*, and setting the output of the parsing to
    be an assignment to one of the relevant classes along with associated values.
    For example, in the case of a command to set an alarm, assigning the output to
    the device's alarm function and extracting the time and date. However, the problem
    of coverage also arises with handcrafted grammars and additional rules would have
    to be continually added to deal with inputs that cannot be parsed with the existing
    rules.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种方法，在输入更有约束和可预测的情况下是可行的，即编写语法进行分类，使用[第6章](ch06.html "第6章. 对话语法")中展示的技术，*对话语法*，并将解析的输出设置为相关类的一个赋值以及相关的值。例如，在设置闹钟的命令中，将输出赋给设备的闹钟功能并提取时间和日期。然而，手工制作的语法也面临着覆盖面的问题，并且需要不断添加额外的规则来处理无法用现有规则解析的输入。
- en: A third approach, is to match the input against predefined patterns. This approach
    has been deployed successfully in the implementation of a number of commercially
    available chatbots and VPAs. The downside is that initially a large number of
    patterns have to be created to match all the possible inputs, with the same problem
    of potential lack of coverage.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 第三种方法是使用预定义的模式匹配输入。这种方法已成功应用于许多商业聊天机器人和虚拟个人助理的实现中。缺点是起初需要创建大量模式以匹配所有可能的输入，同样存在潜在覆盖不足的问题。
- en: Making an appropriate response
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 做出适当的响应
- en: 'The app''s response to the user''s input varies according to the user intention
    that has been identified, which can be broadly classified into the following categories:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 应用程序对用户输入的响应根据已识别的用户意图而有所不同，大致可以分为以下几类：
- en: For form-filling dialogs, the dialog has to be initiated and several rounds
    of system-user interaction may be required to fill the necessary slots in the
    dialog's frame, as shown in [Chapter 5](ch05.html "Chapter 5. Form-filling Dialogs"),
    *Form-filling Dialogs*
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于表单填充对话，需要启动对话，并可能需要几轮系统-用户交互来填充对话框架中必要的槽位，如[第5章](ch05.html "第5章. 表单填充对话")中所示，*表单填充对话*。
- en: In the case of web services, the response will be a call to the web service
    involved and some text will be extracted to be spoken by the TTS
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在涉及网络服务的情况下，响应将是对相关网络服务的调用，并提取一些文本由TTS朗读。
- en: For tasks involving the activation of features on the device, such as placing
    a call or setting an alarm, the command is executed and some text is extracted
    to be spoken by the TTS
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于涉及激活设备特性的任务，如拨打电话或设置闹钟，执行命令并提取一些文本由TTS朗读。
- en: Finally, if the task is conversation, the VPA provides a conversational response
    which is generated by the Pandorabots chatbot system for the apps presented in
    this chapter
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，如果任务是进行对话，VPA提供的对话响应是由本章介绍的应用程序中的Pandorabots聊天机器人系统生成的。
- en: Pandorabots
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Pandorabots
- en: Pandorabots is a free open source-based web service that enables developers
    to create and host chatbots on the web (see [http://www.pandorabots.com/](http://www.pandorabots.com/)).
    Currently, more than 221,000 chatbots are hosted, covering a range of languages.
    There is also a premium service for commercial development. Many VPAs on mobile
    devices have been created using Pandorabots. These include Voice Actions by Pannous
    (also known as Jeannie), Skyvi, Iris, and Pandorabot's own CallMom app. CallMom
    can perform the same sorts of tasks as other VPAs, but also includes a learning
    feature so that it can learn personal preferences and contacts, and can be taught
    to correct speech recognition errors.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: Pandorabots是一个基于开源的免费网络服务，使开发人员能够在网上创建和托管聊天机器人（请见[http://www.pandorabots.com/](http://www.pandorabots.com/)）。目前，已有超过221,000个聊天机器人在此托管，涵盖多种语言。同时，还为商业开发提供了一项付费服务。许多移动设备上的VPAs都是使用Pandorabots创建的。这些包括Pannous的Voice
    Actions（也称为Jeannie）、Skyvi、Iris以及Pandorabots自己的CallMom应用。CallMom可以执行其他VPAs相同的任务，但还包括学习功能，因此它可以学习个人偏好和联系人，并且可以教会它纠正语音识别错误。
- en: ALICE 2.0 is one of the chatbot personalities available in the `CallMom` app.
    Its predecessor ALICE, originally developed in 1995 by Dr. Richard S. Wallace,
    has won numerous awards in chatbot competitions, including the Loebner prize that
    is awarded to the chatbot, which in an annual competition is considered by judges
    to be the most human-like. Three of the four finalists in the 2013 Loebner competition
    used the Pandorabots technology. Much of the knowledge in the original ALICE was
    hard-wired and has now become obsolete. For example, the response to *Who is the
    Prime Minister of England?* has not been updated from the original response *Tony
    Blair*. ALICE 2.0 overcomes these shortcomings by obtaining its factual information
    from external services, as do other VPAs such as Siri. More information about
    Pandorabots and chatbots in general can be found at the Pandorabots website and
    at the ALICE A.I. Foundation site ([www.alicebot.org](http://www.alicebot.org)),
    founded by Wallace to promote the development of **Artificial Intelligence Markup
    Language** (**AIML**) and chatbot technology in general.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: ALICE 2.0是`CallMom`应用中可用的聊天机器人个性之一。其前身ALICE，最初由理查德·S·华莱士博士于1995年开发，已在聊天机器人竞赛中赢得了众多奖项，包括授予被认为是最像人类的年度竞赛聊天机器人的洛布纳奖。2013年洛布纳竞赛的四名决赛选手中有三个使用了Pandorabots技术。原始ALICE中的大部分知识都是硬编码的，现在已经过时。例如，对*英格兰的总理是谁？*的回答仍未从原始的*托尼·布莱尔*更新。ALICE
    2.0通过从外部服务获取事实信息，克服了这些不足，其他VPAs（如Siri）也是如此。关于Pandorabots及聊天机器人的更多信息可以在Pandorabots网站和由华莱士创立的ALICE
    A.I.基金会网站（[www.alicebot.org](http://www.alicebot.org)）上找到，该基金会旨在推广**人工智能标记语言**（**AIML**）及聊天机器人技术的发展。
- en: AIML
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: AIML
- en: 'AIML is an XML-based language used to specify the conversational behaviors
    of chatbots. The basic unit in AIML is `category`, which consists of a `pattern`
    and a `template` attribute. The following is an example:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: AIML是一种基于XML的语言，用于指定聊天机器人的对话行为。AIML中的基本单位是`category`，它由`pattern`和`template`属性组成。以下是示例：
- en: '[PRE0]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: In this example, the user's input is matched against the pattern `WHAT ARE YOU`
    and the response provided in the template is generated. By using many thousands
    of categories and wild cards to enable more flexible pattern matching, quite sophisticated
    conversations can be produced.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在此示例中，用户的输入与模式`WHAT ARE YOU`匹配，并生成模板中提供的回应。通过使用成千上万的类别和通配符以实现更灵活的模式匹配，可以产生相当复杂对话。
- en: 'Wild cards are used to match a string of one or more words in the input. Here
    is a simple example of the wildcard `*`:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 通配符用于匹配输入中的一个或多个单词的字符串。以下是一个简单的通配符`*`示例：
- en: '[PRE1]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: In this example, any input starting with `ABBA` will match this category, resulting
    in the output `They were a great band in the 70's`.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在此示例中，任何以`ABBA`开头的输入都将匹配此类别，结果输出为`They were a great band in the 70's`（他们70年代是一个很棒的乐队）。
- en: 'There are often several different ways of saying the same thing and rather
    than listing each as a pattern or template pair, the `<srai>` tag (meaning symbolic
    reduction) can be used, as in the following example:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 通常会有多种不同的方式表达同一件事情，而不是将每个都列为模式或模板对，可以使用`<srai>`标签（意味着符号简化），如下例所示：
- en: '[PRE2]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Here the input `HOW DID YOU GET YOUR NAME` is treated in meaning to be the same
    as `WHAT DOES ALICE STAND FOR`, and the `<srai>` tag indicates that they should
    both have the same answer.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，输入`HOW DID YOU GET YOUR NAME`被视为与`WHAT DOES ALICE STAND FOR`具有相同含义，并且`<srai>`标签表示它们应具有相同的答案。
- en: If there is no pattern that matches the input; in other words, the bot does
    not understand what has been said to it; the ultimate default category applies.
    For this category, the pattern is `*` and the default response is `I have no answer
    for that`. The art of bot programming is to provide a series of responses in the
    ultimate default category that helps to keep the conversation going. For example,
    *tell me more about yourself* should cause the user to say something for which
    there will probably be a matching pattern. The ultimate default category can also
    be used to catch input that is not predicted by any pattern and process it to
    determine if it can be handled in some other way. For example, it could be sent
    to a search engine or an online knowledge source to get a response.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有与输入匹配的模式；换句话说，机器人不理解对它说的话；那么将应用最终默认类别。对于这个类别，模式是 `*`，默认响应是 `I have no answer
    for that`。机器人编程的艺术在于提供一系列的响应，以帮助保持对话的进行。例如，*告诉我更多关于你自己的事情* 应该使用户说出可能有匹配模式的话。最终默认类别还可以用来捕获任何模式都无法预测的输入，并处理它以确定是否可以以其他方式处理。例如，它可以被发送到搜索引擎或在线知识源以获取响应。
- en: Pattern matching is performed using a matching algorithm that conducts a graph
    search through the categories. The text in the AIML patterns is first tidied up
    by removing unnecessary punctuations, converting to upper case, and expanding
    contractions such as I'll to I will.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 模式匹配是通过使用一种匹配算法来完成的，该算法通过类别进行图搜索。首先整理 AIML 模式中的文本，去除不必要的标点符号，转换为大写，并扩展缩略词，例如将
    I'll 扩展为 I will。
- en: As far as templates are concerned, in addition to specifying the text of the
    response, it is also possible to perform simple computations. For example, values
    of properties, which are constants referring to properties of the bot, such as
    `age`, `name`, or `location`, can be retrieved. There are methods for dealing
    with predicates also, which are variables set during a conversation for items
    such as the topic of the conversation, or how to deal with the use of pronouns
    to refer to a particular word. These computations help to make the conversation
    more natural.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 就模板而言，除了指定响应的文本外，还可以执行简单的计算。例如，可以检索属性值，这些属性值是指向机器人属性的常数，如 `age`、`name` 或 `location`。还有处理谓词的方法，这些谓词是在对话过程中设置的变量，例如对话的主题，或者如何处理代词以指代特定的词。这些计算有助于使对话更加自然。
- en: A more comprehensive coverage of AIML is beyond the scope of this book. Full
    documentation can be found at the Pandorabots website ([www.pandorabots.com](http://www.pandorabots.com)).
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 本书不涵盖对 AIML 的全面介绍。完整的文档可以在 Pandorabots 网站上找到（[www.pandorabots.com](http://www.pandorabots.com)）。
- en: Using oob tag to add additional functions
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用 oob 标签添加附加功能
- en: 'The `<oob>` tag is a recent addition to AIML that supports usage on mobile
    devices. OOB stands for out of band, a term taken from engineering to refer to
    a conversation on a separate, hidden channel. In AIML, `<oob>` tags can be used
    to send commands to the device, for example, to place a call, send a text message,
    launch an app, and so on. The content of the tag is not a part of the response
    received by the user, so items such as URLs, app names, and other keywords can
    be included here to be extracted and treated as desired in the Android code. Here
    are a few examples of patterns using the `<oob>` tag:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '`<oob>` 标签是最近添加到 AIML 中的，支持在移动设备上使用。OOB 是 out of band 的缩写，这是工程中的一个术语，指的是在单独的隐藏通道中进行对话。在
    AIML 中，`<oob>` 标签可以用来向设备发送命令，例如拨打电话、发送短信、启动应用程序等。标签的内容不是用户收到的响应的一部分，因此可以在这里包含诸如
    URL、应用程序名称和其他关键字等内容，以便在 Android 代码中提取并根据需要进行处理。以下是一些使用 `<oob>` 标签的模式示例：'
- en: '[PRE3]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: In this example, if the bot does not find a match for the user's input in its
    AIML files, the response is marked as `<search>`. The content of the search query
    is `<star/>`, the value of which is the words spoken in the input. The code to
    carry out this stage for this and the following examples can be found in `VPALib`
    in the code bundle (`sandra.libs.vpa.vpalib`). The text located outside the `<oob>`
    tag can be used for other purposes; in these apps, it is sent to TTS and used
    for the spoken output.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在此示例中，如果机器人没有在其 AIML 文件中找到用户输入的匹配项，则响应被标记为 `<search>`。搜索查询的内容是 `<star/>`，其值是输入中说出的话。此阶段以及以下示例的代码可以在代码包中的
    `VPALib` (`sandra.libs.vpa.vpalib`) 中找到。位于 `<oob>` 标签外的文本可以用于其他目的；在这些应用程序中，它被发送到
    TTS 并用于语音输出。
- en: 'The following example shows how the input `WIKIPEDIA` sets up the launch of
    the URL for Wikipedia:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的示例展示了输入`WIKIPEDIA`如何设置Wikipedia的URL启动：
- en: '[PRE4]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'In the following example, the matched input `GMAIL` sets up the launch of Google
    mail:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下示例中，匹配的输入`GMAIL`设置了Google邮箱的启动：
- en: '[PRE5]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The VPALib library
  id: totrans-57
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: VPALib库
- en: We have created a library that contains the code which connects with Pandorabots.
    Any app that wants to incorporate an agent just has to deal with the interface
    aspects, such as the GUI appearance and the control of the speech recognition
    and synthesis.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 我们创建了一个库，其中包含与Pandorabots连接的代码。任何想要集成代理的应用只需处理界面方面的问题，比如GUI外观以及语音识别和合成的控制。
- en: The `VPALib` library uses `ASRLib`, `TTSLib`, and `XMLLib` to manage speech
    recognition, speech synthesis, and asynchronous tasks when retrieving web contents
    (you can see it if you check the `libs` folder in the `VPALib` project). This
    way, it can focus on the code required to manage the VPA behavior.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '`VPALib`库使用`ASRLib`、`TTSLib`和`XMLLib`来管理语音识别、语音合成和检索网络内容时的异步任务（你可以在`VPALib`项目中的`libs`文件夹中查看这些库）。这样，它可以专注于管理VPA行为的代码。'
- en: The main class in the VPALib library is the `Bot` class, which sends queries
    to the Pandorabots website, parses the results, and carries out the corresponding
    actions on the device.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: VPALib库中的主要类是`Bot`类，它向Pandorabots网站发送查询，解析结果，并在设备上执行相应的操作。
- en: When a new bot is created, we must specify an ID to the constructor. This is
    the ID in the Pandorabots site (for example, `d7b695cf0e344c0a` for Jack). Also,
    we can specify its topic of specialization. For example, if the bot is specialized
    for providing information about the NFL, the string `NFL` is used to carry out
    web searches. So, if the user asks for games, the bot searches for NFL games,
    and not any kind of games.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新的机器人时，我们必须向构造函数指定一个ID。这是Pandorabots网站上的ID（例如，Jack的ID为`d7b695cf0e344c0a`）。同时，我们可以指定它的专业主题。例如，如果机器人专门提供有关NFL的信息，则使用字符串`NFL`进行网络搜索。因此，如果用户询问比赛，机器人将搜索NFL比赛，而不是任何类型的比赛。
- en: The `initiateQuery` method sends a text corresponding to the user input, to
    the bot on the Pandorabots site. This process involves inserting `%20` for spaces
    in the query, as the values posted need to be form-URL encoded, creating the query
    and sending it as a background asynchronous task to Pandorabots, using the `XMLLib`
    folder described in [Chapter 5](ch05.html "Chapter 5. Form-filling Dialogs"),
    *Form-filling Dialogs*.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '`initiateQuery`方法将把对应于用户输入的文本发送到Pandorabots网站上的机器人。这个过程涉及到在查询中插入`%20`作为空格，因为需要以表单-URL编码的形式发布值，创建查询并将其作为后台异步任务发送到Pandorabots，使用[第5章](ch05.html
    "第5章.表单填充对话")，*表单填充对话*中描述的`XMLLib`文件夹。'
- en: The results from `AsyncTask` are processed in the `processXMLContents()` method.
    The output from the response that comes back from Pandorabots is parsed using
    `XMLPullParser` in a similar way to how we parsed `VXML` ([Chapter 5](ch05.html
    "Chapter 5. Form-filling Dialogs"), *Form-filling Dialogs*) or `XML` grammar files
    ([Chapter 6](ch06.html "Chapter 6. Grammars for Dialog"), *Grammars for Dialog*).
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '`AsyncTask`的结果在`processXMLContents()`方法中处理。来自Pandorabots的响应输出使用`XMLPullParser`进行解析，其方式与我们解析`VXML`（[第5章](ch05.html
    "第5章.表单填充对话")，*表单填充对话*）或`XML`语法文件（[第6章](ch06.html "第6章.对话语法")，*对话语法*）类似。'
- en: 'The response either includes `<oob>` tags or does not. If it does not, the
    only task for the bot is to parse and synthesize the response. For this, it must
    extract the message contained within the `<that>` tag. Here is an example of the
    outcome of `AsyncTask`:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 响应内容可能包含或不包含`<oob>`标签。如果不包含，机器人唯一要做的就是解析和合成响应。为此，它必须提取`<that>`标签内的信息。以下是`AsyncTask`结果的示例：
- en: '[PRE6]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: In this case, the method would invoke the TTS engine to synthetize `C, Java,
    Lisp, SETL and English`.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在此情况下，该方法将调用TTS引擎来合成`C, Java, Lisp, SETL和English`。
- en: Note
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The gender of Google's TTS voices cannot be programmatically selected. We have
    used the UK English voice, which is currently male, but it might be possible that
    the gender selected for the VPA does not match the voice in the user's device.
    Currently, this can only be resolved by using other TTS engines.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: Google的TTS语音的性别无法通过编程选择。我们使用了英国英语语音，目前是男性，但可能会出现VPA选择的性别与用户设备中的声音不匹配的情况。目前，这只能通过使用其他TTS引擎来解决。
- en: 'When `<oob>` tags are present, we assume that they have been marked up in the
    AIML file with one of the tags: `<search>`, `<launch>`, `<url>`, and `<dial>`.
    When `<search>` is encountered, the `googleQuery` method is invoked, which launches
    a query in Google search engines. When `<launch>` is encountered, the `launchApp`
    method is invoked that launches an app in the device. Similarly, the `launchUrl`
    method is invoked when the `<url>` tag is encountered to open the specified web
    page. Finally, when `<dial>` is processed, it invokes the `placePhoneCall` method,
    which dials a number.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 当存在 `<oob>` 标签时，我们假设它们在AIML文件中已经标记为以下标签之一：`<search>`，`<launch>`，`<url>` 和 `<dial>`。当遇到
    `<search>` 时，将调用 `googleQuery` 方法，在Google搜索引擎中启动查询。当遇到 `<launch>` 时，将调用 `launchApp`
    方法，在设备中启动一个应用。类似地，当遇到 `<url>` 标签时，将调用 `launchUrl` 方法以打开指定的网页。最后，当处理 `<dial>` 时，它会调用
    `placePhoneCall` 方法，拨打电话。
- en: The `launchApp` and `launchUrl` methods are similar to those introduced in [Chapter
    4](ch04.html "Chapter 4. Simple Voice Interactions"), *Simple Voice Interactions*,
    except that there the code was more complex as it used similarity functions. The
    methods shown in this chapter have been kept simpler in order to focus on the
    use of `<oob>` tags as a technique for recognizing these commands within the user's
    input.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '`launchApp` 和 `launchUrl` 方法与第4章[简单语音交互](ch04.html "第4章. 简单语音交互")中介绍的方法相似，不同之处在于，那里的代码更为复杂，因为它使用了相似性函数。本章展示的方法更为简单，以便专注于将
    `<oob>` 标签作为一种技术，用于识别用户输入中的这些命令。'
- en: More generally, it is up to the developer to decide whether to mark up the different
    functions in AIML and then process them or whether to employ a different method
    for recognizing whether the output is text to be spoken or a command to be executed.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 更一般地说，开发者需要决定是否在AIML中标记不同的功能，然后处理它们，或者采用不同的方法来识别输出是文本还是需要执行的命令。
- en: Creating a Pandorabot
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建一个Pandorabot
- en: The apps that will be described in the following sections use AIML code provided
    on the Pandorabots site. Thus, the first step we must take is to register for
    an account in the Pandorabots website.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 下节将要描述的应用使用的是Pandorabots网站提供的AIML代码。因此，我们必须采取的第一步是在Pandorabots网站注册一个账户。
- en: Once registered, enter the site and click on the **Create a Pandorabot** option.
    This will open a page where you will be asked to name your bot (we called ours
    `Jack`). Select your startup AIML from a number of choices, including an option
    of **No initial content, the Pandorabot starts with no knowledge**. For the purposes
    of this example, select one of the AIML sets (for example, **Dr Wallace's A.L.I.C.E
    – March 2002**). This will take you to a page for your Pandorabot where you can
    explore a number of options.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 注册后，进入网站并点击**创建一个Pandorabot**选项。这将打开一个页面，要求你为你的机器人命名（我们称我们的为`Jack`）。从多个选项中选择你的启动AIML，包括**无初始内容，Pandorabot从零知识开始**的选项。为了这个示例的目的，选择一个AIML集合（例如，**Dr
    Wallace的A.L.I.C.E – 2002年3月**）。这将带你去到你的Pandorabot的页面，在那里你可以探索许多选项。
- en: To see the AIML files, click on **AIML** and then on any of the files listed.
    This will give an idea of the large number of categories that can be used to provide
    conversational responses.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看AIML文件，请点击**AIML**，然后点击列出的任何文件。这将让你了解可以用来提供对话响应的众多类别。
- en: To try out the bot with the pre-existing AIML, click on Train and then ask questions
    to see what responses the bot gives. This will bring up a training page indicating
    the AIML file where a match has been found for your input as well as various other
    options that help to refine the bot. The pre-existing AIML files cannot be modified
    but any new categories will be stored in a file called `update.aiml`.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 要尝试使用预存在的AIML的机器人，请点击训练，然后提问以查看机器人的回答。这将打开一个训练页面，指示找到与你的输入匹配的AIML文件，以及帮助完善机器人的其他各种选项。预存在的AIML文件无法修改，但任何新的类别都将存储在名为
    `update.aiml` 的文件中。
- en: To enable your bot to be available for others to use, you must publish it (or
    republish, if you have made any changes to the AIML code). Return to the home
    page of your bot and click on **Publish**. This will load a page showing the location
    of your bot.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 若要让你的机器人供其他人使用，你必须发布它（或者如果你对AIML代码做了任何更改，重新发布）。回到你的机器人主页，点击**发布**。这将加载一个页面，显示你的机器人的位置。
- en: Clicking on this link will open a page that is available publicly to anyone
    who has access to the link, letting them interact with your bot. In this way,
    you can collect further data from interactions with the bot and view them in log
    files, enabling you to further refine the bot's responses.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 点击此链接将打开一个公开页面，任何拥有链接的人都可以访问并与您的机器人互动。这样，您可以收集与机器人互动的进一步数据，并在日志文件中查看，从而进一步优化机器人的响应。
- en: In this example, we will provide an interface that runs on an Android device
    and uses speech to interact with the bot. It will be important to note the **botid**,
    as this will be required when connecting to your bot from your Android program.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在此示例中，我们将提供一个在 Android 设备上运行的接口，并使用语音与机器人互动。注意 **botid** 将很重要，因为从您的 Android
    程序连接到您的机器人时需要此 ID。
- en: Sample VPAs – Jack, Derek, and Stacy
  id: totrans-80
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 示例 VPAs – Jack、Derek 和 Stacy
- en: 'To illustrate the use of `VPALib`, we have developed three bots: Jack, Derek,
    and Stacy. As can be observed in their respective packages (see the code bundle),
    they have the same structure; a main activity that implements ASR and TTS and
    creates an instance of the bot, and a simple graphical interface. This shows the
    convenience of having a library that deals with the connection to Pandorabots.
    The main difference is in their corresponding AIML files.'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 为了说明 `VPALib` 的使用，我们开发了三个机器人：Jack、Derek 和 Stacy。从它们各自的软件包（见代码包）中可以看出，它们具有相同的结构；一个实现
    ASR 和 TTS 的主活动，并创建一个机器人实例，以及一个简单的图形界面。这显示了拥有一个处理与 Pandorabots 连接的库的便利性。主要区别在于它们对应的
    AIML 文件。
- en: 'The links in Pandorabots for the bots are as follows:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: Pandorabots 中机器人的链接如下：
- en: 'Jack: [http://www.pandorabots.com/pandora95cf0e344c0a/talk?botid=d7b695cf0e344c0a](http://www.pandorabots.com/pandora/talk?botid=d7b695cf0e344c0a)'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Jack: [http://www.pandorabots.com/pandora/talk?botid=d7b695cf0e344c0a](http://www.pandorabots.com/pandora/talk?botid=d7b695cf0e344c0a)'
- en: 'Derek: [http://www.pandorabots.com/pandora/talk?botid=a80ce25abe3](http://www.pandorabots.com/pandora/talk?botid=a80ce25abe3)'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Derek: [http://www.pandorabots.com/pandora/talk?botid=a80ce25abe3](http://www.pandorabots.com/pandora/talk?botid=a80ce25abe3)'
- en: Stacy:[http://www.pandorabots.com/pandora/talk?botid=e257c70bae346e98](http://www.pandorabots.com/pandora/talk?botid=e257c70bae346e98)
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Stacy: [http://www.pandorabots.com/pandora/talk?botid=e257c70bae346e98](http://www.pandorabots.com/pandora/talk?botid=e257c70bae346e98)'
- en: 'The interfaces for Jack and Derek are shown in the following screenshot:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: Jack 和 Derek 的界面在以下屏幕截图中显示：
- en: '![Sample VPAs – Jack, Derek, and Stacy](img/5297_08_02_corrected.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![示例 VPAs – Jack、Derek 和 Stacy](img/5297_08_02_corrected.jpg)'
- en: Jack is a general-purpose VPA, while Derek is a specialized VPA. Specialized
    VPAs perform tasks such as providing customer service or answering customer queries.
    The VPA's knowledge base is encoded in AIML as a set of question-response pairs,
    similar to FAQs. We have developed a rudimentary set of questions in AIML about
    Type 2 diabetes. Derek can answer questions about topics such as symptoms, causes,
    treatment, risks to children, and complications.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: Jack 是一个通用型 VPA，而 Derek 是一个专业型 VPA。专业型 VPA 执行诸如提供客户服务或回答客户查询等任务。VPA 的知识库以 AIML
    编码形式存储，作为一组问题-回答对，类似于常见问题解答。我们在 AIML 中开发了一套关于 2 型糖尿病的基本问题。Derek 可以回答有关症状、原因、治疗、对孩子的影响和并发症等话题的问题。
- en: 'Stacy has the same AIML files as Jack but in addition, has a file containing
    categories with `<oob>` tags to perform a small selection of functions such as
    the following:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: Stacy 具有与 Jack 相同的 AIML 文件，但除此之外，还有一个包含带有 `<oob>` 标签的类别的文件，以执行如下小部分功能：
- en: Sending a search term to DBPedia, obtaining a response, and speaking it. If
    no text is available from DBPedia, the search term is sent to Google search.
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向 DBPedia 发送搜索词，获取响应并朗读。如果无法从 DBPedia 获取文本，则将搜索词发送到 Google 搜索。
- en: Calling a web page (Wikipedia or Facebook).
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调用网页（维基百科或 Facebook）。
- en: Launching an app on the device (clock, calendar, phone).
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在设备上启动应用（时钟、日历、电话）。
- en: The code to perform these functions can be found in `VPALib` in the code bundle.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 执行这些功能的代码可以在代码包中的 `VPALib` 中找到。
- en: Notice in the `Jack.java` (`Jack` project) and `Derek.java` (`Derek` project)
    files how the `Bot` class is instantiated differently. In the case of Jack, it
    is without `specializedTopic`, while in the case of Derek, it is `Type 2 diabetes`,
    using the two alternative constructors of the `Bot` class (`VPALib` project).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意 `Jack.java` (`Jack` 项目) 和 `Derek.java` (`Derek` 项目) 文件中 `Bot` 类实例化的不同方式。在
    Jack 的情况下，没有 `specializedTopic`，而在 Derek 的情况下，是 `Type 2 diabetes`，使用了 `Bot` 类
    (`VPALib` 项目) 的两种替代构造函数。
- en: After running the `Derek` app a few times, it will soon become apparent that
    misrecognitions of your spoken input result in the bot responding with the default
    response `I have no answer for that`. This is likely to become annoying after
    a few times but there is also the problem that a potentially valid query is lost
    because the recognized words do not match any of the patterns in the AIML code.
    For example, in one interaction with Derek we said *what are the risks to my children*
    and the app returned the recognition result `what other risks children`, which
    did not match any of our patterns. It would have been more productive to have
    extracted the useful parts of this phrase, `risks` and `children`, and combine
    them with the term `Type 2 diabetes`, to send an expanded search query which would
    be more likely to find a relevant result. This has been implemented by using a
    category in the AIML code containing an `<oob>` tag that links with a function
    in `VPALib`.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 运行几次 `Derek` 应用后，很快就会发现对您口语输入的误识别会导致机器人用默认响应“我对那个没有答案”来回应。这可能会在几次后变得令人烦恼，而且还有一个潜在有效查询丢失的问题，因为识别出的词汇与
    AIML 代码中的任何模式都不匹配。例如，在与 Derek 的一次互动中，我们说“对我的孩子有什么风险”，应用返回的识别结果是“其他风险孩子”，这并没有匹配我们的任何模式。如果提取这个短语中的有用部分，“风险”和“孩子”，并将它们与“Type
    2 diabetes”这个术语结合，发送一个扩展的搜索查询，可能会更有可能找到相关结果。这已经通过在 AIML 代码中使用一个包含 `<oob>` 标签的类别来实现，该标签与
    `VPALib` 中的一个函数相链接。
- en: Alternative approaches
  id: totrans-96
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 替代方法
- en: These examples demonstrate some of the functions that can be performed by a
    VPA using the Pandorabots conversational engine and `<oob>` tags as a resource.
    Other functions can be added too (for a complete list of `<oob>` tags with examples,
    see [https://code.google.com/p/aiml-en-us-pandorabots-callmom/wiki/CallMomOOBTags](https://code.google.com/p/aiml-en-us-pandorabots-callmom/wiki/CallMomOOBTags)).
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 这些示例展示了使用 Pandorabots 对话引擎和 `<oob>` 标签作为资源可以执行的一些功能。还可以添加其他功能（有关带有示例的 `<oob>`
    标签的完整列表，请参见[https://code.google.com/p/aiml-en-us-pandorabots-callmom/wiki/CallMomOOBTags](https://code.google.com/p/aiml-en-us-pandorabots-callmom/wiki/CallMomOOBTags)）。
- en: 'The following are some limitations to this approach:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些此方法的局限性：
- en: For general conversational interaction, there should to be sufficient default
    responses to handle cases when there is no match for the input. This is not a
    serious problem as there are lots of examples in the pre-existing AIML code that
    can be used or adapted.
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于一般的对话交互，应当有足够的默认响应来处理输入没有匹配的情况。这不是一个严重的问题，因为现有的 AIML 代码中有许多可以使用或适配的示例。
- en: In the case of specialized VPAs, it might not be sufficient to use the rather
    adhoc procedure of sending unmatched input to a search engine, even if the query
    is expanded, as in the previous example, where the words `Type 2 diabetes` were
    added to the search query. This approach relies very much on the search engine
    coming back with a list of URLs that fit in with the user's query and on the search
    text reflecting accurately the user's intended query.
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于专业的虚拟个人助手（VPA），即使如前一个示例中那样将查询扩展，例如添加“Type 2 diabetes”这样的词汇，可能也不足以使用相对临时性的方法将未匹配的输入发送到搜索引擎。这种方法很大程度上依赖于搜索引擎返回与用户查询相匹配的
    URL 列表，并且搜索文本准确地反映用户的意图。
- en: The use of `<oob>` tags depends on creating patterns that correctly match the
    user's input. For example, the user should say something like *calendar*, *Gmail*,
    or some other keyword to indicate which device function is intended. These patterns
    in the AIML code have to be closely linked to the Java code that makes use of
    them. A library that implements this would be a useful addition.
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<oob>` 标签的使用取决于创建正确匹配用户输入的模式。例如，用户应该说出类似于“日历”、“Gmail”或其他关键词来指示预期的设备功能。这些 AIML
    代码中的模式必须与使用它们的 Java 代码紧密相连。实现这一点的库将是一个有用的补充。'
- en: The approach does not generalize easily for websites. For example, each website,
    such as Wikipedia, has to be coded separately as a pattern in a category in AIML.
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这种方法不便于网站的一般化处理。例如，每个网站（如维基百科）都必须在 AIML 的一个类别中作为一个模式单独编码。
- en: A more sophisticated and scalable method for determining the user's intention
    could be to use the types of grammar illustrated in [Chapter 6](ch06.html "Chapter 6. Grammars
    for Dialog"), *Grammars for Dialog*. A handcrafted grammar could be designed to
    recognize key words or phrases in the input, or an appropriate statistical grammar
    could be developed to handle the input more robustly. Input that is not extracted
    in this way could then be treated as conversational input and passed to a resource
    such as AIML.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 一种更复杂且可扩展的方法来确定用户的意图，可以是使用[第6章](ch06.html "第6章. 对话语法")中展示的*对话语法*类型的语法。可以设计一个手工打造的语法来识别输入中的关键词或短语，或者开发一个适当的统计语法来更健壮地处理输入。未通过这种方式提取的输入，则可以作为对话输入，传递给如AIML这样的资源。
- en: Some of these issues are being addressed by the Pandorabots team but the solutions
    are not currently available as open source code. New developments will be posted
    on the website for the book.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: Pandorabots团队正在解决其中一些问题，但目前的解决方案尚未作为开源代码提供。新的发展将在本书的网站上发布。
- en: Summary
  id: totrans-105
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 概述
- en: In this chapter we have seen how to develop different types of VPAs using the
    resources provided by the Pandorabots chatbot technology. Based on the apps described
    here, you should now be able to design and develop VPAs for your own purposes.
    Some suggestions for how to build on these examples and to include more of the
    techniques described throughout the book are presented in [Chapter 9](ch09.html
    "Chapter 9. Taking it Further"), *Taking it Further*.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们了解了如何使用Pandorabots聊天机器人技术提供的资源来开发不同类型的VPAs。基于这里描述的应用程序，你现在应该能够为你的目的设计和开发VPAs。[第9章](ch09.html
    "第9章. 深入学习")中提出了一些建议，关于如何在这些示例基础上构建，并包含本书中描述的更多技术。
