# 前言

在当今技术发达的世界，我们的生活越来越多地数字化，所有这些信息都可以通过移动设备随时随地访问。用户可以下载和尝试成千上万的应用程序。由于移动设备上的应用程序可以轻松访问大量信息，最大的挑战就是保护用户的私人信息并尊重他们的隐私。

第一款 Android 手机在 2009 年问世。从那时起，移动生态系统就不再一样了。平台的开放性和较少限制的应用模型在开发人员社区中引起了兴奋，也促进了创新和实验。但正如每个硬币都有两面一样，开放性也是如此。Android 平台激发了所谓不良分子的想象力。Android 为他们提供了一个完美的试验场来尝试他们的想法。因此，作为开发人员，甚至作为消费者，了解 Android 的安全模型以及如何明智地使用它来保护自己和消费者，这一点非常重要。

《*Android 应用安全基础*》深入探讨了从内核层到应用层的 Android 安全，包含实用的实战示例、图解和日常使用场景。这本书将向你展示如何保护你的 Android 应用和数据。它将为你提供在开发应用时非常有用的技巧和提示。

你将学习 Android 堆栈的整体安全架构。书中详细讨论了使用权限保护组件、在清单文件中定义安全、加密算法和协议、安全存储、以安全为重点的测试以及保护设备上的企业数据。你还将学习在将新技术和用例（如 NFC 和移动支付）集成到你的 Android 应用程序时如何保持安全意识。

# 本书涵盖的内容

第一章，*Android 安全模型 - 大局观*，关注从平台安全到应用安全的整个 Android 堆栈的安全性。这一章将为后续章节的构建提供基准。

第二章，*应用构建块*，从安全的角度介绍了应用组件、权限、清单文件和应用程序签名。这些都是 Android 应用程序的基本组成部分，了解这些组件对于构建我们的安全知识至关重要。

第三章，*权限*，讨论了 Android 平台现有的权限，如何定义新权限，如何用权限保护应用组件，并提供关于何时定义新权限的分析。

第四章，*定义应用程序的策略文件*，深入探讨了 manifest 文件的工作机制，这是应用程序的策略文件。我们讨论了如何加强策略文件的技巧和小窍门。

第五章，*尊重你的用户*，涵盖了妥善处理用户数据的最佳实践。这对于开发者的声誉至关重要，因为声誉取决于用户的评价和评分。开发者还应该小心处理用户的私人信息，以免陷入法律陷阱。

第六章，*你的工具 - 加密 API*，讨论了 Android 平台提供的加密能力。这些包括对称加密、非对称加密、散列、密码模式和密钥管理。

第七章，*保护应用程序数据*，全面介绍了应用程序数据在静态和传输过程中的安全存储。我们讨论了如何将私密数据与应用程序一起沙盒化，以及如何在设备上、外部存储卡、驱动器和数据库上安全地存储数据。

第八章，*企业中的 Android*，讨论了 Android 平台提供的设备安全工具有及其对应用程序开发人员意味着什么。这一章对企业应用程序开发者特别有吸引力。

第九章，*安全测试*，专注于设计和开发以安全为重点的测试用例。

第十章，*未来展望*，讨论了移动领域即将到来的用例，以及这对 Android 的影响，尤其是从安全角度出发。

# 阅读本书所需的条件

如果你能设置好 Android 环境，并且能够实践本书中讨论的概念和示例，那么这本书将更有价值。关于如何设置环境和开始 Android 开发的详细说明，请参考[developer.android.com](http://developer.android.com)。如果你对内核开发感兴趣，请参考[source.android.com](http://source.android.com)。

在撰写本书时，Jelly Bean（Android 4.2，API 级别 17）是最新版本。我在这个平台上测试了所有的代码片段。自从 2009 年 Cupcake 的首个版本发布以来，谷歌一直在通过连续的版本更新来增强 Android 的安全性。例如，在 Android 2.2（API 级别 8）中添加了远程擦除和设备管理 API，使 Android 对商业社区更具吸引力。每当相关时，我都会引用开始支持特定功能的版本。

# 本书适合的读者对象

这本书是任何对移动安全感兴趣的人的绝佳资源。开发人员、测试工程师、工程经理、产品经理和架构师可以在设计和编写应用程序时将这本书作为参考。高级管理人员和技术专家可以利用这本书来更全面地了解移动安全。最好具备一些关于 Android 堆栈开发的先验知识，但不是必需的。

# 约定

在这本书中，您会发现多种文本样式，这些样式区分了不同类型的信息。以下是一些样式示例，以及它们的含义解释。

文本中的代码字如下所示："The `PackageManager` 类处理安装和卸载应用程序的任务。"

代码块设置如下：

```kt
<intent-filter>
  <action android:name="android.intent.action.MAIN" />
  <category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
```

当我们希望引起您对代码块中特定部分的注意时，相关的行或项目会以粗体显示：

**Intent intent = new Intent("my-local-broadcast");**

**Intent.putExtra("message", "Hello World!");**

**LocalBroadcastManager.getInstance(this).sendBroadcast(intent);**

命令行输入或输出如下所示：

```kt
dexdump –d –f –h data@app@com.example.example1-1.apk@classes .dex > dump

```

**新术语**和**重要词汇**以粗体显示。您在屏幕上看到的词，例如菜单或对话框中的，会像这样出现在文本中："点击**下一步**按钮将带您进入下一个屏幕"。

### 注意

警告或重要注意事项会出现在这样的框中。

### 提示

技巧和诀窍如下所示。

# 读者反馈

我们始终欢迎读者的反馈。让我们知道您对这本书的看法——您喜欢或可能不喜欢的内容。读者的反馈对我们来说非常重要，以便开发出您真正能从中获得最大收益的标题。

要向我们发送一般反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在邮件的主题中提及书名。

如果您在某个主题上有专业知识，并且有兴趣撰写或参与书籍编写，请查看我们在[www.packtpub.com/authors](http://www.packtpub.com/authors)上的作者指南。

# 客户支持

既然您已经拥有了 Packt 的一本书，我们有许多方法可以帮助您充分利用您的这次购买。

## 勘误

尽管我们已经竭尽全力确保内容的准确性，但错误仍然会发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能报告给我们，我们将不胜感激。这样做可以避免其他读者感到沮丧，并帮助我们在后续版本中改进这本书。如果您发现任何勘误信息，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情。一旦您的勘误信息得到验证，您的提交将被接受，勘误信息将被上传到我们的网站，或添加到该标题勘误部分的现有勘误列表中。任何现有的勘误信息可以通过选择您的标题从[`www.packtpub.com/support`](http://www.packtpub.com/support)进行查看。

## 侵权行为

在互联网上，版权材料的侵权行为是所有媒体持续存在的问题。在 Packt，我们非常重视保护我们的版权和许可。如果您在互联网上以任何形式遇到我们作品的非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

如果您发现疑似盗版材料，请通过`<copyright@packtpub.com>`联系我们，并提供相关链接。

我们感谢您帮助保护我们的作者，以及我们向您提供有价值内容的能力。

## 问题咨询

如果您在书的任何方面遇到问题，可以通过`<questions@packtpub.com>`联系我们，我们将尽力解决。
