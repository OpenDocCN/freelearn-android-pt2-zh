# 前言

安卓系统迅速成为了最受欢迎的移动操作系统之一，不仅受到用户的喜爱，各种开发公司和开发者也同样青睐。当然，这也使其成为了恶意对手的热门攻击目标。

自 2005 年以来，安卓系统一直在公共领域广为人知，其功能和复杂性都实现了巨大的增长。如今的移动智能手机通常包含了关于用户的高度敏感信息，以及访问他们的电子邮件、短信和社交、专业网络服务的权限。与任何软件一样，这种能力和复杂性的提升也带来了安全风险的提升；软件越强大、越复杂，管理起来就越困难，适应这个充满挑战的世界也就越困难。

这尤其适用于移动智能手机上的软件。这些充满个人和敏感信息的热点提出了一个有趣的安全背景，在其中解决问题。从某种角度看，移动智能手机的安全背景很难与网络上的服务器或“云”中的服务器相提并论，因为它们本质上是不移动的。它们不容易被移动或盗取；我们可以实施软件和物理安全措施，以防止未经授权的访问。我们还可以持续监控它们，并自主快速响应安全事件。然而，对于我们装在口袋、手提包里，以及遗忘在出租车上的设备来说，游戏规则就大不相同了！

安卓用户和开发者需要不断关注他们的移动安全风险，正因为这种需求，移动安全与风险评估专家和安全工程师的需求量很大。本书旨在为初露头角的安卓安全评估专家平滑学习曲线，同时作为经验丰富的安卓安全专业人士解决常见安卓安全问题的工具。

# **本书涵盖内容**

第一章，*安卓开发工具*，介绍了我们如何设置并运行开发者用来在安卓平台上开发安卓应用和本地级别组件的工具。这一章也作为对那些对安卓还不太熟悉，并想了解设置常见开发环境和工具需要些什么的人的介绍。

第二章，*应用安全参与*，向我们介绍了安卓操作系统提供的，专门用于保护应用程序的组件。本章涵盖了手动检查以及使用一些与保护应用程序及其与操作系统的交互相关的安全工具和服务。

第三章，*Android Security Assessment Tools*，介绍了安卓安全专家用于评估应用程序给用户带来的技术风险的流行以及新兴的安全工具和框架。在这里，你将学习如何设置、运行并扩展后续章节中将使用的黑客攻击和逆向工程工具。

第四章，*利用应用程序*，涵盖了针对安卓应用程序的案例利用技术。本章内容涵盖了所有类型的安卓应用程序组件，并详细介绍了如何从源代码和跨应用程序的语境中检查它们的安全风险。它还介绍了第三章中介绍的工具的更高级用法，即安卓安全评估工具。

第五章，*保护应用程序*，被设计为与第四章，*利用应用程序*完全相反。这一章不是纯粹讨论应用程序的缺陷，而是讲述应用程序的修复方法。它引导读者了解开发者可以使用的实用技术，以保护应用程序免受第四章中详细描述的某些攻击。

第六章，*逆向工程应用程序*，帮助读者学习如何破解应用程序，并教授他们安卓逆向工程师用于检查和分析应用程序的技术。你将详细了解 Dex 文件格式，以及如何将 Dex 字节码解释为有用的表示，使逆向工程更加容易。该章节还涵盖了逆向工程师在应用程序和本地组件在安卓操作系统上运行时，可以使用的新的动态分析方法。

第七章，*安全网络*，帮助读者深入了解应用程序开发人员可以遵循的实用方法，以保护数据在网络中传输时的安全。使用这些技术，你将能够为安全套接字层（SSL）通信添加更强的验证。

第八章, *原生利用与分析*，致力于涵盖专注于 Android 平台的本地环境的安全评估和测试技术。读者将学会寻找可用于 root 手机和提升 Android 系统权限的安全漏洞，以及对本地服务执行低级别攻击，包括内存破坏和竞争条件利用。

第九章, *加密和开发设备管理策略*，重点介绍如何正确使用加密技术，避免一些常见的反模式，以保持应用程序中的数据安全。它推荐了几个健壮且节省时间的第三方库，以快速且安全地增强应用程序的安全性。最后，我们将介绍如何使用 Android 设备管理 API 来实现和执行企业安全策略。

# 阅读本书所需的条件

尽管这本书对软件有一些要求，但书中的许多演练在开始使用它们来参与讨论的主题之前，都会讨论下载和安装所需的软件。

以下是开始演练前你可能需要安装的软件列表：

+   Android 软件开发工具包（SDK）

+   Android 原生开发工具包（NDK）

+   GNU C/C++编译器（GCC）

+   GNU 调试器（GDB）

+   Python，最好是 2.7 版本，但 3.0 版本应该也可以正常工作

+   `Virtual box`

+   `Ettercap`（适用于 Windows 或 Linux/Unix 系统）

+   `Dex2Jar`

+   `Objdump`

+   `Radamsa`

+   `JD-GUI`

+   Java 开发工具包（JDK）

+   `drozer`，一个 Android 安全评估框架

+   `OpenSSL`命令行工具

+   `keytool`命令行工具

# 本书的目标读者

本书有的章节致力于利用 Android 应用程序，有的章节专注于加强它们的安全性，旨在展示硬币的两面，即攻击者和防御者。

安全研究人员、分析师和渗透测试人员将享受有关如何利用 Android 应用的具体细节。对于渴望了解更多安全知识的应用程序开发人员，他们将获得如何保护应用程序免受攻击的实际建议。

# 约定

在这本书中，你会发现多种文本样式，用于区分不同类型的信息。以下是一些样式示例及其含义的解释。

文本中的代码字、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 处理程序将如下所示："您必须使用`–t`开关指定上一步选择的系统映像 ID。"

代码块设置如下：

```kt
from drozer import android
from drozer.modules import common, Module
class AttackSurface(Module,common.Filters, common.PackageManager):
```

当我们希望引起您对代码块中某个特定部分的注意时，相关的行或项目会以粗体显示，如下所示：

```kt
from drozer import android
from drozer.modules import common, Module
class AttackSurface(Module,common.Filters, common.PackageManager):

```

任何命令行输入或输出都会按照以下方式编写：

```kt
sudo aptitude update //If you have aptitude installed

```

**新术语**和**重要词汇**会用粗体显示。你在屏幕上、菜单中或对话框里看到的单词，例如，会在文本中像这样出现："接受许可后，你可以通过点击**安装**来收集你的文档和 API"。

### 注意

警告或重要提示会像这样出现在一个框里。

### 提示

提示和技巧会像这样出现。

# 读者反馈

我们非常欢迎读者的反馈。告诉我们你对这本书的看法——你喜欢或可能不喜欢的地方。读者的反馈对我们来说非常重要，它帮助我们开发出对你真正有用的书籍。

如果要给我们发送一般性反馈，只需将电子邮件发送至`<feedback@packtpub.com>`，并在邮件的主题中提及书名。

如果你有一个有专业知识的主题，并且有兴趣撰写或参与书籍编写，请查看我们在[www.packtpub.com/authors](http://www.packtpub.com/authors)的作者指南。

# 客户支持

既然你现在拥有了 Packt 的一本书，我们有很多方法可以帮助你最大限度地利用你的购买。

## 下载示例代码

你可以从你在[`www.packtpub.com`](http://www.packtpub.com)的账户下载你所购买的所有 Packt 书籍的示例代码文件。如果你在其他地方购买了这本书，可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)注册，我们会直接将文件通过电子邮件发送给你。

## 勘误

尽管我们已经尽力确保内容的准确性，但错误仍然会发生。如果你在我们的书中发现了一个错误——可能是文本或代码中的错误——如果你能报告给我们，我们将不胜感激。这样做，你可以避免其他读者的困扰，并帮助我们改进本书的后续版本。如果你发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)报告，选择你的书，点击**勘误提交表单**链接，并输入你的勘误详情。一旦你的勘误被验证，你的提交将被接受，勘误将在我们网站的相应位置上传，或者添加到现有勘误列表中。任何现有的勘误可以通过在[`www.packtpub.com/support`](http://www.packtpub.com/support)选择你的标题来查看。

## 侵犯版权

互联网上版权材料的侵犯是所有媒体面临的持续问题。在 Packt，我们非常重视保护我们的版权和许可。如果你在互联网上发现我们作品的任何非法副本，无论何种形式，请立即提供位置地址或网站名称，以便我们可以寻求补救。

如果发现任何疑似盗版材料，请通过`<copyright@packtpub.com>`联系我们，并提供相关链接。

我们感谢您帮助保护我们的作者，以及我们向您提供有价值内容的能力。

## 咨询问题

如果您在阅读本书的任何方面遇到问题，可以通过`<questions@packtpub.com>`联系我们，我们将尽力解决。
