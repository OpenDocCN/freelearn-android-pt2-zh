# 前言

在移动领域，性能高效的应用程序是成功的关键因素之一。如果应用运行缓慢，用户可能会放弃使用。学习如何构建在功能性和用户体验之间平衡速度和性能的应用可能是一个挑战；然而，现在比以往任何时候都更重要的是要找到这种平衡。

*Android 高性能编程*将使你思考如何从应用安装的任何硬件中榨取最大性能，从而你可以扩大影响并提高参与度。本书首先提供了对 Android 最新技术的介绍，以及性能在 Android 应用中的重要性。然后，我们将解释常规用于调试和剖析 Android 应用的 Android SDK 工具。我们还将学习一些高级主题，如构建布局、多线程、网络和安全性。电池寿命是应用程序中最大的瓶颈之一；本书将展示耗尽电池寿命的典型代码示例，如何预防这种情况，以及如何在各种情况下测量应用程序的电池消耗。 

本书解释了构建优化和高效系统的技术，这些系统不会耗尽电池电量，导致内存泄漏，或随时间变慢。

# 本书内容涵盖

第一章，*引言：为什么需要高性能?*，对主题进行了介绍，包括当前 Android 技术的最新状态，以及性能在 Android 应用中的重要性。

第二章，*高效调试*，涵盖了 Android SDK（和一些外部工具）提供的常规用于调试和剖析 Android 应用的工具。

第三章，*构建布局*，将带你了解用于优化 Android 例程的技术，编写高效使用内存的应用程序，并解释从内存分配到垃圾回收的概念。

第四章，*内存*，提供了许多关于 UI 设计的见解，需要学习以创建高效的 UI，使其快速加载，不会给用户造成延迟感，并且能够高效更新。

第五章，*多线程*，解释了 Android 应用中所有不同的线程选项以及何时应用每种选项。一些高级技术，如 IPC，也将通过实际代码展示。

第六章，*网络*，展示了用于执行高效网络操作的技术，以及从服务器检索数据的技术，如指数回退或避免轮询。

第七章，*安全*，涵盖了保护安卓应用程序的技术，如何利用安卓原生提供的安全加密机制，以及如何获取关于连接的信息或只是通知连接变化。

第八章，*优化电池消耗*，提供了消耗电池寿命的典型代码示例，如何防止这种情况，以及如何在各种情况下从应用程序测量电池消耗；许多开发者在开发应用时不知道如何处理拍照或视频、处理预览和保存数据的行为。

第九章，*安卓中的本地编码*，这一章介绍了在安卓中本地代码和 C++的世界及其使用方法。

第十章，*性能提示*，帮助开发者在常见的编码情境中得到指导，错误的抉择可能会影响应用效率；这将是关于前几章未涉及主题的最佳实践指南。

# 你需要为这本书准备以下内容

你需要以下硬件来使用这本书：

+   运行 Windows、Linux 或 Mac OS X 的 PC/笔记本电脑

+   安卓手机。建议使用至少安装了安卓 5.0 的高端型号。

# 这本书适合谁

这个主题面向具有高级安卓知识，希望推动自己的知识并学习提高应用程序性能技巧的开发者。我们假设他们能够熟练使用整个安卓 SDK，并且已经这样做了很多年。他们还熟悉如 NDK 之类的框架，以使用对性能至关重要的本地代码。

# 约定

在这本书中，你会发现有多种文本样式区分不同类型的信息。以下是一些样式示例及其含义的解释。

文本中的代码字、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 处理方式将如下显示："如果你进入这个文件夹并调用`adb`命令，你会在屏幕上看到可用选项的列表。"

一段代码的设置如下：

```kt
<resources>
    <style name="Theme.NoBackground" parent="android:Theme">
      <item name="android:windowBackground">@null</item>
    </style>
</resources>
```

任何命令行输入或输出都会如下写出：

```kt
adb shell dumbsys gfxinfo <PACKAGE_NAME>

```

**新术语**和**重要词汇**会以粗体显示。你在屏幕上看到的词，例如菜单或对话框中的，会像这样出现在文本中："为了在设备上调试过度绘制，安卓提供了一个有用的工具，可以在**开发者选项**中启用。"

### 注意

警告或重要提示会以这样的框形式出现。

### 提示

技巧和窍门会以这样的形式出现。

# 读者反馈

我们始终欢迎读者的反馈。让我们知道你对这本书的看法——你喜欢或不喜欢什么。读者的反馈对我们很重要，因为它帮助我们开发出你真正能从中获得最大收益的标题。

如果要给我们发送一般反馈，只需通过电子邮件`<feedback@packtpub.com>`联系我们，并在邮件的主题中提及书籍的标题。

如果您在某个主题上有专业知识，并且有兴趣撰写或参与书籍编写，请查看我们位于[www.packtpub.com/authors](http://www.packtpub.com/authors)的作者指南。

# 客户支持

既然您已经拥有了 Packt 的一本书，我们有许多方法可以帮助您充分利用您的购买。

## 下载示例代码

您可以从您的账户[`www.packtpub.com`](http://www.packtpub.com)下载本书的示例代码文件。如果您在别处购买了这本书，可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)注册，我们会直接将文件通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册我们的网站。

1.  将鼠标悬停在顶部的**支持**标签上。

1.  点击**代码下载与勘误**。

1.  在**搜索**框中输入书籍的名称。

1.  选择您要下载代码文件的书。

1.  从下拉菜单中选择您购买本书的地方。

1.  点击**代码下载**。

您还可以通过在 Packt Publishing 网站的书页上点击**代码文件**按钮来下载代码文件。通过在**搜索**框中输入书名可以访问此页面。请注意，您需要登录到您的 Packt 账户。

文件下载后，请确保您使用最新版本的软件解压或提取文件夹：

+   适用于 Windows 的 WinRAR / 7-Zip

+   适用于 Mac 的 Zipeg / iZip / UnRarX

+   适用于 Linux 的 7-Zip / PeaZip

本书代码捆绑包也托管在 GitHub 上，地址为[`github.com/PacktPublishing/Android-High-Performance-Programming`](https://github.com/PacktPublishing/Android-High-Performance-Programming)。我们还有其他丰富的书籍和视频代码捆绑包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)查看。请查看！

## 下载本书的色彩图像

我们还为您提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的色彩图像。色彩图像将帮助您更好地理解输出的变化。您可以从[`www.packtpub.com/sites/default/files/downloads/AndroidHighPerformanceProgramming_ColorImages.pdf`](http://www.packtpub.com/sites/default/files/downloads/AndroidHighPerformanceProgramming_ColorImages.pdf)下载此文件。

## 勘误

尽管我们已经竭尽全力确保内容的准确性，但错误仍然在所难免。如果您在我们的书中发现了一个错误——可能是文本或代码中的错误——如果您能向我们报告，我们将不胜感激。这样做可以避免其他读者产生困扰，并帮助我们在后续版本中改进这本书。如果您发现任何勘误信息，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**Errata Submission Form**链接，并输入您的勘误详情。一旦您的勘误信息被核实，您的提交将被接受，并且勘误信息将被上传到我们的网站或添加到该标题下的现有勘误列表中。

要查看之前提交的勘误信息，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书名。所需信息将在**Errata**部分出现。

## 盗版问题

在互联网上对版权材料的盗版是一个所有媒体都面临的持续问题。在 Packt，我们非常重视保护我们的版权和许可。如果您在互联网上以任何形式遇到我们作品的非法副本，请立即提供我们该位置地址或网站名称，以便我们可以寻求补救措施。

如果您怀疑有盗版材料，请通过`<copyright@packtpub.com>`联系我们，并提供疑似盗版材料的链接。

我们感谢您帮助我们保护作者权益和我们为您提供有价值内容的能力。

## 问题反馈

如果您对这本书的任何方面有问题，可以通过`<questions@packtpub.com>`联系我们，我们将尽力解决问题。
