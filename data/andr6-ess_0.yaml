- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: Android 6 will primarily focus on improving the overall user experience, and
    it will bring in a few features, such as a redesigned permission model in which
    applications are no longer automatically granted all of their specified permissions
    at the time of installation, the Doze power scheme for extended battery life when
    a device is not manipulated by the user, and native support for fingerprint recognition.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: Android 6 主要关注改善整体用户体验，并引入了一些功能，例如重新设计的权限模型，在该模型中，应用程序在安装时不再自动获得其指定权限，设备在用户未操作时采用
    Doze 电源方案以延长电池寿命，以及原生支持指纹识别。
- en: If you're already an Android developer, you're only a few steps away from being
    able to use your existing development experience to reach your users wherever
    or whenever they want or need your app.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已经是 Android 开发者，只需几步之遥就能利用你现有的开发经验，无论用户在任何时间、任何地点需要或想要你的 app，你都能触达他们。
- en: As a professional Android developer, you have to create production-ready apps
    for your users. This book will give you what it takes to ship polished apps as
    part of a development team at a company, an independent app developer, or just
    as a programmer using Android development best practices.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名专业的 Android 开发人员，你必须为用户创建可用于生产的 app。这本书将为你提供作为公司开发团队的一员、独立 app 开发者或仅作为使用
    Android 开发最佳实践的程序员发布精致 app 所需要的一切。
- en: By the end of the book, you'll be able to identify critical areas for improvement
    in an app and implement the necessary changes and refinements to ensure it meets
    Android's Core App Guidelines prior to shipping.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的最后，你将能够识别应用程序中需要改进的关键领域，并实施必要的更改和完善，以确保在发布前符合 Android 核心应用指南。
- en: What this book covers
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖的内容
- en: '[Chapter 1](part0015_split_000.html#E9OE2-d332ea27e7224e4f9f2d9e09fae9c7cb
    "Chapter 1. Android Marshmallow Permissions"), *Android Marshmallow Permissions*,
    discusses how the Android permission system and model are vast and have made a
    few changes that can help app developers and applications gain more traction,
    installations, and give users the ability to decide when your applications will
    be able to use each permission-dependent feature. Keep in mind, though, that this
    is just a starting point and Android Marshmallow still needs to gain market share
    and get adopted by OEMs, enabling users with the freedom of choice. You as an
    app developer must prepare in advance and make sure your application development
    is forward-facing, allowing new users to enjoy the latest updates as soon as possible
    while maintaining a high level of performance for your applications.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '[第1章](part0015_split_000.html#E9OE2-d332ea27e7224e4f9f2d9e09fae9c7cb "第1章.
    Android Marshmallow 权限")，*Android Marshmallow 权限*，讨论了 Android 权限系统和模型非常广泛，并且进行了一些可以帮助应用开发者和应用程序获得更多吸引力、安装量，以及让用户决定你的应用程序何时能够使用每个依赖权限功能的更改。但请记住，这只是一个起点，Android
    Marshmallow 仍需要获得市场份额并得到 OEM 厂商的采用，使用户能够自由选择。作为应用开发者，你必须提前做好准备，确保你的应用开发面向未来，让新用户尽快享受最新的更新，同时保持你的应用程序的高性能水平。'
- en: '[Chapter 2](part0020_split_000.html#J2B82-d332ea27e7224e4f9f2d9e09fae9c7cb
    "Chapter 2. App Links"), *App Links*, talks about how app linking has become powerful
    in Android Marshmallow. This allows you, the app developers, help the system better
    decide how to act. Handling web URLs will give you wider exposure, a bigger funnel
    into your apps, and better experience, which you can provide to your users (sums
    up to better ratings and more downloads and vice versa).'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[第2章](part0020_split_000.html#J2B82-d332ea27e7224e4f9f2d9e09fae9c7cb "第2章.
    应用链接")，*应用链接*，讲述了应用链接在 Android Marshmallow 中变得多么强大。这允许你，应用开发者，帮助系统更好地决定如何行动。处理网页
    URL 将为你提供更广泛的曝光，更多进入你 app 的渠道，以及你可以为用户提供更好的体验（这都有助于提高评分和增加下载量，反之亦然）。'
- en: App linking is simple to implement, easy to understand, and is a must-have feature
    in the mobile/web world today. While app linking enables better action handling
    for users using your applications, users can have multiple devices, expecting
    the same behavior on each device, and would be more engaged if their data and
    action handling is all around.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 应用链接实现简单，易于理解，在当今的移动/网络世界中是必备功能。尽管应用链接为使用你应用程序的用户提供了更好的操作处理，但用户可能会有多个设备，期望在每个设备上都有相同的行为，如果他们的数据和操作处理能够全方位的话，他们会更加投入。
- en: '[Chapter 3](part0023_split_000.html#LTSU1-d332ea27e7224e4f9f2d9e09fae9c7cb
    "Chapter 3. Apps'' Auto Backup"), *Apps'' Auto Backup*, informs you that Android
    Marshmallow brings with it a great backup feature for apps, reducing friction
    for users migrating to new devices.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[第三章](part0023_split_000.html#LTSU1-d332ea27e7224e4f9f2d9e09fae9c7cb "第三章.
    应用自动备份")，*应用自动备份*，告知你Android Marshmallow带来了一项为应用备份的出色功能，这减少了用户迁移到新设备时的摩擦。'
- en: In a world full of such diverse apps, maximizing the benefits from automatic
    backups leads to excellent user experience. The goal of this feature is to unload
    the burden and shorten the time required to set up a new device with the user's
    favorite apps. Allowing the users to enter your app with just a password prompt,
    if required, after a new installation can be a great experience. Try it yourself!
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在一个充满各种不同应用的世界里，最大化自动备份的好处可以带来极佳的用户体验。这一功能的目标是减轻负担，缩短设置新设备所需的时间，并安装用户喜爱的应用。如果需要，在全新安装后，仅通过密码提示就让用户进入你的应用，可以提供很好的体验。试试看吧！
- en: '[Chapter 4](part0028_split_000.html#QMFO2-d332ea27e7224e4f9f2d9e09fae9c7cb
    "Chapter 4. Changes Unfold"), *Changes Unfold*, goes over a few of the changes
    in Android Marshmallow. All of these changes are important to follow and will
    help you in your app development cycles. A few more changes are discussed in future
    chapters with a more detailed approach.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[第四章](part0028_split_000.html#QMFO2-d332ea27e7224e4f9f2d9e09fae9c7cb "第四章.
    变革展开")，*变革展开*，概述了Android Marshmallow中的一些变化。所有这些变化都值得关注，并将在你的应用开发周期中提供帮助。未来章节将讨论更多变化，并采用更详细的方法。'
- en: '[Chapter 5](part0044_split_000.html#19UOO1-d332ea27e7224e4f9f2d9e09fae9c7cb
    "Chapter 5. Audio, Video, and Camera Features"), *Audio, Video, and Camera Features*,
    covers quite a few changes and additions to Android APIs. Android Marshmallow
    is more about helping us, the developers, achieve better media support and showcase
    our ideas when using audio, video, or camera APIs.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[第五章](part0044_split_000.html#19UOO1-d332ea27e7224e4f9f2d9e09fae9c7cb "第五章.
    音频、视频和相机功能")，*音频、视频和相机功能*，涵盖了Android API的许多变化和新增内容。Android Marshmallow更多的是帮助我们开发者实现更好的媒体支持，在使用音频、视频或相机API时展示我们的创意。'
- en: '[Chapter 6](part0048_split_000.html#1DOR01-d332ea27e7224e4f9f2d9e09fae9c7cb
    "Chapter 6. Android for Work"), *Android for Work*, covers how Android Marshmallow
    has brought in quite a few changes to the world of Android for Work. As developers,
    we need to always maintain a viable connection with the needs of an organization.
    Making sure that we go over and understand the Android for Work world with the
    changes in Marshmallow helps us build and target enterprise workflows with the
    added benefit of a simpler API.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[第六章](part0048_split_000.html#1DOR01-d332ea27e7224e4f9f2d9e09fae9c7cb "第六章.
    工作用Android")，*工作用Android*，涵盖了Android Marshmallow为工作用Android世界带来的诸多变化。作为开发者，我们需要始终与组织的需要保持可行的联系。确保我们通过Marshmallow的变化了解工作用Android的世界，可以帮助我们构建并针对企业工作流程，同时享有更简单API的好处。'
- en: '[Chapter 7](part0059_split_000.html#1O8H61-d332ea27e7224e4f9f2d9e09fae9c7cb
    "Chapter 7. Chrome Custom Tabs"), *Chrome Custom Tabs*, talks about the newly
    added feature, Chrome custom tabs, that allows us developers to embed web content
    into our application, modify the UI, and adjust it to our app''s theme and colors
    and the look and feel. This helps us keep the user in our application and still
    provide a nice UI and overall feel.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[第七章](part0059_split_000.html#1O8H61-d332ea27e7224e4f9f2d9e09fae9c7cb "第七章.
    Chrome自定义标签页")，*Chrome自定义标签页*，讨论了新增加的功能，Chrome自定义标签页，它允许我们开发者将网页内容嵌入到我们的应用中，修改UI，并根据我们应用的主题和色彩以及观感进行调整。这帮助我们让用户留在我们的应用中，同时提供良好的UI和整体体验。'
- en: '[Chapter 8](part0063_split_000.html#1S2JE1-d332ea27e7224e4f9f2d9e09fae9c7cb
    "Chapter 8. Authentication"), *Authentication*, discuss how Android Marshmallow
    gives us a new API to authenticate users with the fingerprint API. We can use
    the sensor and authenticate the user even within our application and save it for
    later usage if we want to save the need of user login using the Credentials grace
    period abilities Android Marshmallow has introduced. We also covered a way to
    make our application more secure using HTTPS only. The StrictMode policy, enforced
    with the help of the usesCleartextTraffic flag, allows us to make sure that all
    the nodes we connect to the outer world are examined to check if there''s a need
    for a secure connection or not.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[第8章](part0063_split_000.html#1S2JE1-d332ea27e7224e4f9f2d9e09fae9c7cb "第8章 认证"),
    *认证*, 讨论了Android Marshmallow如何通过指纹API为我们提供了一个新的用户认证接口。我们可以使用传感器，甚至在我们的应用程序内对用户进行认证，并在需要时保存，以避免使用Android
    Marshmallow引入的凭据宽限期功能来登录用户。我们还介绍了一种方法，通过仅使用HTTPS来提高应用程序的安全性。借助usesCleartextTraffic标志实施的StrictMode策略，可以确保我们连接到外部世界的所有节点都经过检查，以确认是否需要安全连接。'
- en: What you need for this book
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 你需要为这本书准备什么
- en: 'For this book, you will require previous knowledge of the Android platform,
    APIs, and the application development process. You will also need to set up your
    work environment to have at least the following:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这本书，你需要具备Android平台、API以及应用程序开发过程的前期知识。你还需要设置工作环境，至少具备以下条件：
- en: Android Studio, which can be downloaded from [https://developer.android.com/sdk/index.html](https://developer.android.com/sdk/index.html)
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以从[https://developer.android.com/sdk/index.html](https://developer.android.com/sdk/index.html)下载的Android
    Studio
- en: The latest Android SDK tools and platforms. Make sure that you upgrade to the
    latest versions and add the Android 6.0 (Marshmallow) platform if it's missing
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最新的Android SDK工具和平台。请确保升级到最新版本，如果缺少的话，添加Android 6.0（Marshmallow）平台。
- en: An Android device is helpful, but you may use an emulator if you prefer, or
    you may use the great solution of Genymotion as an emulator, at [https://www.genymotion.com/](https://www.genymotion.com/)
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安卓设备很有帮助，但如果你愿意，也可以使用模拟器，或者你可以使用Genymotion的出色解决方案作为模拟器，访问[https://www.genymotion.com/](https://www.genymotion.com/)
- en: Who this book is for
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 这本书的目标读者
- en: This book is for Android developers who are looking to move their applications
    into the next Android version with ease. In the chapters of this book, the author
    has referred to Android 6 as Android Marshmallow. You should have a good understanding
    of Java and previous Android APIs, and you should be able to write applications
    with APIs prior to Marshmallow.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书是为希望轻松地将应用程序迁移到下一个Android版本的安卓开发者准备的。在本书的章节中，作者将Android 6称为Android Marshmallow。你应该对Java和之前的Android
    API有很好的了解，并且应该能够使用Marshmallow之前的API编写应用程序。
- en: Conventions
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 约定
- en: In this book, you will find a number of text styles that distinguish between
    different kinds of information. Here are some examples of these styles and an
    explanation of their meaning.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，你会发现多种文本样式，用于区分不同类型的信息。以下是一些样式示例及其含义的解释。
- en: 'Code words in text, database table names, folder names, filenames, file extensions,
    pathnames, dummy URLs, user input, and Twitter handles are shown as follows: "The
    `setTorchMode()` method has been added to control the flash torch mode."'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 文本中的代码字、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟URL、用户输入和Twitter处理程序如下所示："添加了`setTorchMode()`方法来控制闪光灯手电筒模式。"
- en: 'A block of code is set as follows:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都如下所示：
- en: '[PRE1]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '**New terms** and **important words** are shown in bold. Words that you see
    on the screen, for example, in menus or dialog boxes, appear in the text like
    this: "When heading to **Settings** | **More** | **VPN**, you can now view the
    VPN apps."'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '**新术语**和**重要词汇**以粗体显示。你在屏幕上看到的内容，例如菜单或对话框中的，会像这样出现在文本中："现在当你前往**设置** | **更多**
    | **VPN**时，你可以查看VPN应用。"'
- en: Note
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Warnings or important notes appear in a box like this.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 警告或重要提示会像这样出现在一个框里。
- en: Tip
  id: totrans-33
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Tips and tricks appear like this.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 提示和技巧会像这样出现。
- en: Reader feedback
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 读者反馈
- en: Feedback from our readers is always welcome. Let us know what you think about
    this book—what you liked or disliked. Reader feedback is important for us as it
    helps us develop titles that you will really get the most out of.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 我们始终欢迎读者的反馈。告诉我们你对这本书的看法——你喜欢或不喜欢什么。读者的反馈对我们很重要，因为它帮助我们开发出你真正能从中获得最大收益的标题。
- en: To send us general feedback, simply e-mail `<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`,
    and mention the book's title in the subject of your message.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 如需向我们提供一般性反馈，只需发送电子邮件至`<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`，并在邮件主题中提及书籍标题。
- en: If there is a topic that you have expertise in and you are interested in either
    writing or contributing to a book, see our author guide at [www.packtpub.com/authors](http://www.packtpub.com/authors).
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在某个主题上有专业知识，并且有兴趣撰写或参与书籍编写，请查看我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。
- en: Customer support
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 客户支持
- en: Now that you are the proud owner of a Packt book, we have a number of things
    to help you to get the most from your purchase.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 既然您已成为Packt图书的骄傲拥有者，我们有一系列措施帮助您充分利用您的购买。
- en: Downloading the example code
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 下载示例代码
- en: You can download the example code files from your account at [http://www.packtpub.com](http://www.packtpub.com)
    for all the Packt Publishing books you have purchased. If you purchased this book
    elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从您的账户[http://www.packtpub.com](http://www.packtpub.com)下载您购买的所有Packt Publishing书籍的示例代码文件。如果您在别处购买了这本书，可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)注册，我们会将文件直接通过电子邮件发送给您。
- en: Downloading the color images of this book
  id: totrans-43
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 下载本书的颜色图像
- en: We also provide you with a PDF file that has color images of the screenshots/diagrams
    used in this book. The color images will help you better understand the changes
    in the output. You can download this file from [https://www.packtpub.com/sites](https://www.packtpub.com/sites)/[default/files/downloads/4412OS_ColoredImages.pdf](http://default/files/downloads/4412OS_ColoredImages.pdf).
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还为您提供了一份PDF文件，其中包含本书中使用的屏幕截图/图表的颜色图像。颜色图像可以帮助您更好地理解输出的变化。您可以从[https://www.packtpub.com/sites](https://www.packtpub.com/sites)/[default/files/downloads/4412OS_ColoredImages.pdf](http://default/files/downloads/4412OS_ColoredImages.pdf)下载此文件。
- en: Errata
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 勘误
- en: Although we have taken every care to ensure the accuracy of our content, mistakes
    do happen. If you find a mistake in one of our books—maybe a mistake in the text
    or the code—we would be grateful if you could report this to us. By doing so,
    you can save other readers from frustration and help us improve subsequent versions
    of this book. If you find any errata, please report them by visiting [http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata),
    selecting your book, clicking on the **Errata Submission Form** link, and entering
    the details of your errata. Once your errata are verified, your submission will
    be accepted and the errata will be uploaded to our website or added to any list
    of existing errata under the Errata section of that title.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我们已经尽力确保内容的准确性，但错误仍然会发生。如果您在我们的书中发现了一个错误——可能是文本或代码中的错误——如果您能报告给我们，我们将不胜感激。这样做，您可以避免其他读者感到沮丧，并帮助我们改进该书的后续版本。如果您发现任何勘误，请通过访问[http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情。一旦您的勘误被验证，您的提交将被接受，勘误信息将被上传到我们的网站或添加到该标题勘误部分下的现有勘误列表中。
- en: To view the previously submitted errata, go to [https://www.packtpub.com/books/content/support](https://www.packtpub.com/books/content/support)
    and enter the name of the book in the search field. The required information will
    appear under the **Errata** section.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 若要查看之前提交的勘误信息，请访问[https://www.packtpub.com/books/content/support](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍名称。所需信息将显示在**勘误**部分下。
- en: Piracy
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 盗版
- en: Piracy of copyrighted material on the Internet is an ongoing problem across
    all media. At Packt, we take the protection of our copyright and licenses very
    seriously. If you come across any illegal copies of our works in any form on the
    Internet, please provide us with the location address or website name immediately
    so that we can pursue a remedy.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 网络上对版权材料的盗版是所有媒体面临的持续问题。在Packt，我们非常重视保护我们的版权和许可。如果您在互联网上以任何形式发现我们作品非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。
- en: Please contact us at `<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`
    with a link to the suspected pirated material.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 如发现疑似盗版材料，请通过`<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`联系我们，并提供相关链接。
- en: We appreciate your help in protecting our authors and our ability to bring you
    valuable content.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我们感谢您帮助保护我们的作者以及我们提供有价值内容的能力。
- en: Questions
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题
- en: If you have a problem with any aspect of this book, you can contact us at `<[questions@packtpub.com](mailto:questions@packtpub.com)>`,
    and we will do our best to address the problem.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您对这本书的任何方面有问题，可以通过`<[questions@packtpub.com](mailto:questions@packtpub.com)>`联系我们，我们将尽力解决问题。
