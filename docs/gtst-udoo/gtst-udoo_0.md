# 前言

自 2000 年代初以来，由于工程和微电子方面的许多进步，全球对硬件制造的重新兴趣被点燃，这促进了新型低成本制造工具的激增。各年龄段的人们，甚至儿童，开始将他们的坏设备、旧玩具和所有未使用的硬件零件转变为令人惊叹的新物体。这种非传统的设计和创造新事物的做法，以表达创造力的新方式为特征，这是形成创客文化的关键因素。

这就是创客革命，一个彻底改变了我们世界的运动。开源项目提供了所有必要的工具，释放了创造力，让我们能够构建事物，无需深厚的编程和工程知识，也无需一套昂贵的组件。事实上，创客革命取得的最重要成就之一，就是将原型制造从大小工厂转移到我们的家中。

2012 年 2 月，另一个名为 UDOO 的开源项目启动了一个集成了 Linux 和 Android 操作系统的原型开发板，目标是结合 Arduino 和 Raspberry Pi 的优势于一块单板。在项目工作一年后的 2013 年 4 月，UDOO 开发板加入了 Kickstarter 众筹平台，创客社区的反馈非常积极——项目在短短 2 天内就完成了资金筹集。

全世界的创客们都如此喜欢这个项目，以至于他们决定贡献自己的力量，不仅通过 Kickstarter 的承诺支持，还在电路设计阶段提供了有用的想法和建议。创客社区提供的帮助促成了一个强大的原型开发板，让我们能够构建一直想要的互动和创意项目。

本书将教你如何使用 UDOO 开发板作为快速原型工具，来构建你的第一个硬件项目。从涉及基础电子元件的简单应用开始，你将通过不同的项目学习构建电子电路，这些项目提供了由 Android 操作系统支持的增强互动。

# 本书内容涵盖

第一章 *启动引擎* 将引导你完成 UDOO 平台的设置和所需开发环境的配置。首先介绍开发板，展示其独特性和与其他板不同的功能；然后指导你安装 Android 操作系统。最后一部分，解释如何为 Arduino 和 Android 配置开发环境，以启动第一个 Hello World Android 应用程序。

第二章，*了解你的工具*，讲述了 Android 应用如何控制连接的设备。首先介绍一些 Arduino 板载特性，然后解释如何创建第一个能够与集成 Arduino 设备通信的 Android 应用。接着展示如何使用面包板创建一个功能完整的电路，以便快速原型制作。

第三章，*测试你的物理应用*，解释了物理应用测试背后的主要概念。第一部分展示了如何构建一个可以从软件应用中测试的电路。然后展示了如何实现一个诊断模式，以测试连接的电路是否正常工作。

第四章，*使用传感器监听环境*，首先解释了传感器的工作原理以及如何使用它们使原型具有上下文感知能力。然后展示了如何构建一个心跳监测器，编写 Arduino 草图读取传感器数据，以及一个 Android 应用来可视化计算结果。

第五章，*管理物理组件的交互*，讲述了如何管理用户交互。首先解释了一些可以用来让外部世界与系统交互的组件。然后展示了如何构建一个带有物理控制器的网络收音机，以管理原型音量和更改当前电台。在最后一部分，使用 Android API 播放网络广播流。

第六章，*为家庭自动化构建 Chronotherm*，解释了如何使用 UDOOUDOO 的一些功能进行家庭自动化。展示了使用检测环境温度的电路创建 Chronotherm，以及一个 Android 用户界面来可视化传感器数据，并改变每个时间间隔所需的温度。

第七章，*使用 Android API 进行人机交互*，为前一章的应用增加了更多功能，扩展了设置管理，使用语音识别和语音合成存储不同的预设，以管理用户的交互。

第八章，*添加网络功能*，再次扩展了 Chronotherm 应用，具备通过 RESTful 网络服务收集天气预报数据的能力。在最后一部分，展示了如何使用收集到的数据为 Chronotherm 提供更多功能。

*第九章*，*使用 MQTT 监控您的设备*，介绍了物联网的主要概念和 MQTT 协议，用于物理设备之间的数据交换。然后展示了如何设置一个基于云的 MQTT 代理，能够接收和分发 Chronotherm 温度更新。最后一部分展示了如何编写一个独立的 Android 应用程序，以接收来自 Chronotherm 发送的数据。

这是一个附录章节，可以从以下链接下载：[`www.packtpub.com/sites/default/files/downloads/1942OS_Chapter_9.pdf`](https://www.packtpub.com/sites/default/files/downloads/1942OS_Chapter_9.pdf)

# 阅读本书所需的条件

为了运行本书中演示的代码，您需要配置开发环境，包括 Android 和 Arduino 的环境，以及安装了 Android 操作系统的双核或四核 UDOO 板，具体配置请参考第一章，*启动引擎*中的*下载和安装 Android*和*设置开发环境*部分。

# 本书适合的读者

本书适合想要将技能应用于构建真实环境中能与 Android 应用交互的设备的 Android 开发者。开始构建基于 Android 的真实设备需要具备基本的 Android 编程知识。不需要预先了解原型平台或电路构建知识。

本书将教您通过一些在原型构建期间经常使用的电子组件来构建真实世界设备的基础知识，以及如何将它们与 Android 用户界面集成。

# 约定

在本书中，您会发现多种文本样式，用于区分不同类型的信息。以下是一些样式示例及其含义的解释。

文本中的代码字如下显示："The `play()` 方法设置当前活动电台的流媒体 URL 并开始异步准备。"

代码块如下设置：

```kt
public class HelloWorld extends Activity {
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_hello_world);
  }
}
```

当我们希望您注意代码块中的特定部分时，相关的行或项目会以粗体显示：

```kt
public class HelloWorld extends Activity {
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_hello_world);
  }
}
```

**新术语**和**重要词汇**以粗体显示。您在屏幕上看到的词，例如菜单或对话框中的，会在文本中这样显示："为了这个 HelloWorld 应用程序的目的，选择一个**空白活动**并点击**下一步**。"

### 注意

警告或重要注意事项会以这样的方框显示。

### 提示

技巧和诀窍会这样显示。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢或可能不喜欢的内容。读者的反馈对我们开发能让您获得最大收益的标题非常重要。

要向我们发送一般反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在邮件的主题中提及书名。

如果您在某个主题上有专业知识，并且有兴趣撰写或参与书籍编写，请查看我们在[www.packtpub.com/authors](http://www.packtpub.com/authors)上的作者指南。

# 客户支持

既然您已经自豪地拥有了一本 Packt 图书，我们有一系列的事情可以帮助您充分利用您的购买。

## 下载示例代码

您可以从您的账户中下载您已购买的 Packt 图书的示例代码文件，访问地址为[`www.packtpub.com`](http://www.packtpub.com)。如果您在别处购买了这本书，可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)进行注册，我们会将文件直接通过电子邮件发送给您。

## 勘误

尽管我们已经尽力确保内容的准确性，但错误仍然会发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——我们非常感激您能向我们报告。这样做，您可以避免其他读者感到沮丧，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情。一旦您的勘误被验证，您的提交将被接受，勘误将在我们网站的相应位置上传，或添加到现有勘误列表中。任何现有的勘误可以通过从[`www.packtpub.com/support`](http://www.packtpub.com/support)选择您的标题来查看。

## 盗版

互联网上版权资料的盗版是所有媒体面临的持续问题。在 Packt，我们非常重视保护我们的版权和许可。如果您在互联网上以任何形式遇到我们作品非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

如果您发现疑似盗版材料，请通过`<copyright@packtpub.com>`与我们联系，并提供链接。

我们感谢您在保护我们作者权益方面所提供的帮助，以及我们能够向您提供有价值内容的能力。

## 问题

如果您在书的任何方面遇到问题，可以联系`<questions@packtpub.com>`，我们会尽力解决。
