# 前言

今天，我们生活在一个日益以数据和数据驱动为中心的世界。我们生活在一个像亚马逊这样的公司追踪我们查看的每个商品和我们购买的每个商品，以便向我们推荐类似产品的世界。我们生活在一个像谷歌这样的公司存储投向它们的每个搜索查询，以便在未来推荐更好的搜索查询的世界。我们生活在一个像 Facebook 这样的社交媒体网站记住我们与朋友分享的每个事件和每个想法，以便更好地了解其数亿用户中的每一个的世界。我们生活在一个日益以数据为中心的世界，因此，我们必须以数据为中心的角度开发应用程序，这是至关重要的。

看看周围——近几年来，移动设备（如智能手机和平板电脑）的增长速度惊人。本书旨在探索数据和 Android，快速深入了解谷歌团队为 Android 操作系统构建的各种方法。本书不仅力求展示所有可用的数据存储方法，还力求阐明每种方法的优点和缺点。通过阅读本书，我的目标是使你能够打造一个高效、设计良好且可扩展的数据中心应用程序。

# 本书涵盖内容

第一章，*在 Android 上存储数据*，重点介绍 Android 上所有不同的本地数据存储方法。本章提供了各种存储方法的充足代码示例，并比较了每种方法的优缺点。

第二章，*使用 SQLite 数据库*，深入探讨了最复杂和最常用的本地数据存储形式——SQLite 数据库——通过引导你实现一个自定义的 SQLite 数据库。

第三章，*SQLite 查询*，旨在对 SQL 查询语言进行概览。它教会读者如何构建强大的数据库查询，这些查询可以与任何 SQLite 数据库一起使用。

第四章，*使用内容提供者*，通过展示如何通过使用内容提供者将数据库暴露给整个 Android 操作系统，扩展了前面的 SQLite 数据库章节。它引导读者完成一个完整的内容提供者的实现，并以讨论使数据公开的好处作为结束。

第五章，*查询联系人表*，专门探讨 Android 操作系统提供的最广泛使用的内容提供者——联系人内容提供者。它探索了联系人表的结构，并提供了一些常见查询的示例。

第六章，*绑定到 UI*，讨论了用户可以将数据绑定到用户界面的方法。由于数据通常显示为列表，这一章通过两种类型列表适配器的实现来进行讲解。

第七章，*实践中的 Android 数据库*，试图脱离编程，专注于更高层次的设计概念。它讨论了到目前为止所讨论的所有本地存储方法的使用方式，并强调了这些本地方法的不足之处——为接下来几章，我们关注外部数据存储，打开大门。

第八章，*探索外部数据库*，引入了使用外部数据库的概念，并列出了读者可以使用的一些常见外部数据存储。这一章以如何设置 Google App Engine 数据存储的示例作为结束。

第九章，*收集和存储数据*，通过讨论应用程序可以如何去收集数据，然后可以将这些数据插入到新的外部数据库中，来扩展上一章的开发。收集数据的方法包括使用可用的 API，以及编写自定义的网络爬虫。

第十章，*综合应用*，通过展示如何首先创建 HTTP 服务端程序，然后从移动应用程序向这些 HTTP 服务端程序发起 HTTP 请求，完成了在之前两章中开始的应用程序。这一章是本书的高潮，向读者展示了如何将移动应用程序与外部数据库连接，并最终解析和显示 HTTP 响应作为列表。

# 阅读本书所需的条件

本书的准备工作包括对 Android 操作系统的基本了解，能够创建 Android 和 Google App Engine 项目的编程 IDE（即 Eclipse），以及能够进行基本网络请求的稳定互联网连接。

# 本书的目标读者

本书面向那些对数据库和其他后端设计概念有一定经验，但可能想要将这些概念应用于移动应用程序的开发者。对于那些在移动应用程序和/或 Android 平台上经验丰富，但可能不太熟悉后端系统和设计/实施数据库模式的开发者，也会发现这本书很有用。

即使对于那些已经在 Android 编程和数据库实施方面有经验的开发者来说，这本书也可能有助于进一步巩固概念，并展示 Android 上数据存储方法的更广泛范围。

# 约定

在这本书中，你会发现多种文本样式，用于区分不同类型的信息。以下是一些样式示例，以及它们含义的解释。

文本中的代码词汇如下所示："它会将我们想要写入的字符串转换为字节形式，然后传递给输出流的`write()`方法。"

代码块如下设置：

```kt
Set<String> values = new HashSet<String>();
values.add("Hello");
values.add("World");
Editor e = sp.edit();
e.putStringSet("strSetKey", values);
e.commit();
Set<String> ret = sp.getStringSet(values, new HashSet<String>());
for(String r : ret) {
Log.i("SharedPreferencesExample", "Retrieved vals: " + r);
}

```

当我们希望引起你对代码块中某个特定部分的注意时，相关的行或项目会以粗体显示：

```kt
<uses-sdk android:minSdkVersion="5" />
<uses-permission android:name="android.permission.READ_CONTACTS"/>
<uses-permission android:name="android.permission.WRITE_CONTACTS"/>

```

任何命令行输入或输出都如下编写：

```kt
adb -s emulator-xxxx shell

```

**新术语**和**重要词汇**以粗体显示。

### 注意

警告或重要信息会以如下框中的形式出现。

### 注意

技巧和诀窍如下所示。

# 读者反馈

我们欢迎读者的反馈。告诉我们你对这本书的看法——你喜欢什么，或者可能不喜欢什么。读者的反馈对我们开发能让你们充分利用的标题非常重要。

要给我们发送一般反馈，只需发送电子邮件到`<feedback@packtpub.com>`，并在邮件的主题中提及书名。

如果你对某个主题有专业知识并且有兴趣撰写或参与书籍编写，请查看我们在[www.packtpub.com/authors](http://www.packtpub.com/authors)上的作者指南。

# 客户支持

既然你现在拥有了 Packt 的一本书，我们有很多方法可以帮助你最大限度地利用你的购买。

## 下载示例代码

你可以从你的账户[`www.packtpub.com`](http://www.packtpub.com)下载你所购买的所有 Packt 图书的示例代码文件。如果你在其他地方购买了这本书，可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)注册，我们会直接将文件通过电子邮件发送给你。

## 勘误

尽管我们已经尽力确保我们内容的准确性，但错误仍然会发生。如果你在我们的书中发现了一个错误——可能是文本或代码中的错误——如果你能报告给我们，我们将不胜感激。这样做，你可以避免其他读者的困扰，并帮助我们改进这本书的后续版本。如果你发现任何勘误，请通过访问[`www.packtpub.com/support`](http://www.packtpub.com/support)，选择你的书籍，点击**勘误表提交表单**链接，并输入你的勘误详情。一旦你的勘误被验证，你的提交将被接受，勘误将被上传到我们的网站，或添加到该标题勘误部分现有的勘误列表中。

## 盗版

网络上版权资料的盗版问题在所有媒体中持续存在。在 Packt，我们非常重视保护我们的版权和许可。如果你在互联网上发现我们作品的任何非法副本，无论何种形式，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

如果发现疑似盗版资料，请通过`<copyright@packtpub.com>`联系我们，并提供相关链接。

我们感谢你帮助保护我们的作者，以及我们为你提供有价值内容的能力。

## 问题

如果您在阅读本书的任何方面遇到问题，可以通过`<questions@packtpub.com>`联系我们，我们将尽力解决。
