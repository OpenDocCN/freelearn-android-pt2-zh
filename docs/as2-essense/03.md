# 第三章。导航项目

现在你已经创建了你的第一个安卓工作室项目，你会明白发生了什么。在开始编程之前，您需要熟悉项目中的导航。一切是如何构成的？您可以在项目中更改哪些设置？你如何改变这些设置，它们意味着什么？

本章旨在介绍安卓工作室中一个项目的结构。我们将从了解项目导航面板开始。然后，我们将浏览项目中最重要的文件夹— `build`、`gen`、`libs`—以及`src/main`下的文件夹，您将了解如何更改项目设置。

这些是我们将在本章中讨论的主题:

*   导航面板
*   项目结构
*   更改项目属性

# 项目导航面板

最初，安卓工作室的主视图中没有显示项目或文件，这可以在下一张截图中看到。正如安卓工作室建议的那样，如果你使用的是苹果电脑，按下 *Alt* + *1* ，或者 *cmd 1* 打开项目视图。也可以点击屏幕左边缘的**项目**按钮打开:

![The project navigation panel](graphics/B05459_03_01.jpg)

**项目**视图显示开放项目列表。这些项目显示在分层视图中。我们可以从项目浏览器的左上角更改视图的类型。在**项目**视图的右上角，有一些操作和一个下拉菜单来配置所选类型的**项目**视图。这些操作在下面的屏幕截图中突出显示:

![The project navigation panel](graphics/B05459_03_02.jpg)

从左上角打开视图选择器，查看可以选择的视图类型的完整列表，如下图所示:

![The project navigation panel](graphics/B05459_03_03.jpg)

以下是浏览项目的可用视图类型:

*   **项目**:这个视图展示了项目的目录结构。
*   **包装**:它只显示包装结构。
*   **划痕**:它只显示你在项目中创建的划痕文件。暂存文件是可运行和可调试的文件，用于代码原型制作。通过导航至**工具** | **新暂存文件**，您可以使用菜单选项创建新暂存文件。
*   **安卓**:它只显示作为开发者的你将包含或编辑你的应用文件的文件夹。这个视图非常方便，可以轻松访问您真正需要的所有文件。这些文件夹只与以简化结构列出的安卓应用程序相关:类文件夹、`res`资源文件夹、`manifest`文件和 Gradle 脚本。由于这种视图类型的目的是呈现一个简化的结构，它与真实的文件夹结构不匹配。
*   **范围** ( **项目文件**、**问题**、**生产**、**测试**和 **Android Instrumentation 测试**):范围是您的项目文件、包和文件夹的子集。如果您选择一个预定义的范围，您可以从**项目**视图右上角的配置菜单中创建您自己的自定义范围。打开配置菜单，选择**编辑范围**选项。默认情况下，您将看到下一个预定义的范围:
    *   **项目文件**:此范围显示您项目中的所有文件
    *   **问题**:这个范围显示你的项目中所有有错误的文件
    *   **生产**:这个范围显示你的项目中所有不是测试文件的文件
    *   **测试**:此范围显示所有测试文件
    *   **安卓仪表测试**:此范围显示所有仪表测试文件

右键单击项目名称以打开上下文菜单，或者单击项目的任何元素。从下面的截图中可以看到，从这个菜单中，我们可以:

*   创建新元素并将其添加到项目中
*   剪切、复制、粘贴或重命名项目中的文件
*   在项目中查找元素
*   分析并重新格式化代码
*   构建项目
*   比较文件
*   Open files in Explorer

    ![The project navigation panel](graphics/B05459_03_04.jpg)

# 项目结构

我们可以使用**项目**视图类型在项目导航窗格中检查项目结构。项目结构包括一个带有我们应用程序名称的文件夹。该文件夹包含应用程序结构和文件。应用程序结构中最重要的元素在`app`目录中。其中包括以下内容:

*   `build/`:这是一个文件夹，里面包含了构建应用后编译的资源和安卓工具生成的类，比如`R.java`文件，里面包含了对应用资源的引用。
*   `libs/`:这是一个文件夹，里面包含了我们代码中引用的库。
*   `src/androidTest/`:这是一个文件夹，里面包含了需要测试的 Java 类的测试类。
*   `src/main/`:这个是一个包含我们应用程序来源的文件夹。您通常使用的所有文件都在此文件夹中。`main`文件夹细分如下:
    *   `java/`: This is a folder that contains the Java classes organized as packages. Every class we create will be in our project package namespace (`com.example.myapplication`). When we created our first project, we also created its main activity, so the activity class should be in this package. The next screenshot shows this main activity class inside the project structure:

        ![The project structure](graphics/B05459_03_05.jpg)

    *   `res/`:这是一个包含项目资源的文件夹，例如指定布局和菜单的 XML 文件，或者图像文件。
    *   `AndroidManifest.xml`:这是安卓项目中必不可少的文件，是我们创建项目时自动生成的。该文件声明了安卓系统运行应用程序所需的基本信息:包名、版本、活动、权限、意图或所需的硬件。
*   `build.gradle`:这个文件是用来构建我们的应用程序的脚本。我们将在本章的*梯度*小节中讨论如何配置该文件中的选项。

## 资源文件夹

资源都是与我们的应用程序相关联的非代码资产。图像或字符串之类的元素作为资源从代码中外部化出来，使得在不改变代码的情况下更新它们变得很容易。资源的一些例子包括颜色、图像、图形、布局、字符串和样式。资源被分发到以下文件夹:

*   `anim/`:这是一个包含动画对象为 XML 文件的文件夹。
*   `color/`:这是一个文件夹，里面包含了我们应用中用到的颜色状态列表。颜色状态列表根据组件状态定义颜色和颜色变化。
*   `drawable/`:这是一个文件夹，包含描述我们应用程序中使用的可绘制对象的图像和 XML 文件。
*   `mipmap/`:这个是一个包含你的应用程序的启动器图标的文件夹。有不同的可绘制文件夹分类到不同的屏幕密度。当我们创建第一个项目时，也创建了一个默认的应用程序图标。这个名为`ic_launcher.png`的图标已经在这些文件夹中了。
*   `layout/`:这是一个包含视图及其元素的 XML 定义的文件夹。
*   `menu/`:这是一个包含应用程序菜单的 XML 定义的文件夹。
*   `values/`:这个是一个包含定义名称-值对集合的 XML 文件的文件夹。这些值可以是颜色、字符串或样式。有不同的值文件夹，它们被分类到不同的屏幕选项中，以使界面适应它们；例如，当应用程序在平板电脑上运行时，放大组件或字体。

我们的基本项目包含一些基本资源。因此，默认情况下，这里讨论的所有文件夹不一定都包括在内。

## 清单文件

`AndroidManifest.xml`文件是一个强制文件，包含安卓系统需要的关于你的应用的关键信息。清单文件必须包含的两个基本的 XML 标签如下:

*   `<manifest>`:XML 文件的根元素。`package`属性定义了你的应用的 Java 包名，这是你的应用的唯一标识符。该元素的其他属性允许您设置版本代码(`android:versionCode`)或版本名称(`android:versionName`)。
*   `<application>`:`<manifest>`中的这个元素包含你的 app 的其余元素，比如活动(`<activity>`)、服务(`<service>`)或者内容提供商(`<provider>`)元素。您可以为此元素指定几个属性，例如，允许您将应用程序设置为可调试(`android:debuggable`)，为应用程序设置用户可读的标签(`android:label`)或设置您的应用程序是否允许备份(`android:allowBackup`)。

清单文件还声明了您的应用程序所需的权限和功能。例如，如果您的应用程序需要互联网访问，清单必须将其添加到清单文件中:

```
<uses-permission android:name="android.permission.INTERNET" />
```

您还可以使用清单文件向安卓系统呈现关于软件开发工具包的信息。使用`<uses-sdk>`元素及其属性来指示您的应用程序支持的最低 SDK 版本和您的目标 SDK。

## 【T0 度】

安卓工作室中的应用是使用 **Gradle** 构建的。这是一个独立于安卓工作室的构建自动化工具，但完全与之集成。Gradle 使用了一种可扩展的声明性的**领域特定语言** ( **DSL** )，它基于 Groovy，这是一种面向 Java 平台的面向对象编程语言。一个 Gradle 构建文件由一个或多个项目组成，每个项目包含一个或多个任务。一项任务代表了一项要完成的工作。您可以在[http://www.gradle.org/](http://www.gradle.org/)了解更多关于 Gradle 的信息。

构建过程的配置在安卓项目中包含的 Gradle 构建文件中声明。如前所述，在项目结构中，安卓应用的构建配置文件是在`/app/build.gradle`文件中定义的。我们可以在该文件中配置的一些主要选项如下:

*   **变体**:我们可以使用同一个项目来配置我们应用程序的不同版本，例如，创建演示版和付费版。变体取决于构建类型(T0 标签)和产品风味配置(T1 标签)。例如两种构建类型是`debug`和`release`，两种产品风格是演示版和付费版。在你的应用程序的 Gradle 构建文件中，你会找到发布的`buildType`:

    ```
    buildTypes {
       release {
          …
       }
    }
    ```

*   **依赖关系**:我们可以指出我们的项目对其他模块或库的本地或远程依赖关系。这些依赖关系在`dependencies`标签下声明。在你的应用程序的 Gradle 构建文件中，你会发现对包含在你的项目的`lib`文件夹中的 JAR 文件的依赖，以及对测试框架 JUnit 的依赖:

    ```
    dependencies {
        compile fileTree(dir: 'libs', include: ['*.jar'])
        testCompile 'junit:junit:4.12'
    }
    ```

*   **清单条目**:我们可以在构建文件中覆盖安卓清单文件的一些条目，提供`manifest`文件的动态配置。例如，我们可以覆盖包名、最小 SDK 或目标 SDK 的值。这些配置在`android/defaultConfig`标签下定义:

    ```
    defaultConfig {
        applicationId "com.example.myapplication"
        minSdkVersion 16
        targetSdkVersion 23
        versionCode 1
        versionName "1.0"
    }
    ```

*   **签约**:我们可以激活发布版的应用签约。构建系统使用默认证书来签署应用程序的调试版本。我们也可以配置我们的密钥和证书来签署发布版本。这些配置在`android/signingConfigs`标签下定义。您将在[第 9 章](09.html "Chapter 9. Preparing for Release")、*准备发布*中学习如何签署您的应用。

# 项目设置

您可以使用**文件** | **设置**和**文件** | **项目结构**导航到包含项目设置的两个对话框。工具栏中也提供了这两种功能:

![Project settings](graphics/B05459_03_06.jpg)

从项目视图中选择您的项目，并导航至**文件**中的**设置**菜单。**设置**对话框的左侧面板显示了以下部分中构造的选项:

*   **外观&行为**:可以更改安卓 Studio 的外观和行为，如字体大小、主题、更新、密码或范围管理。
*   **键位图**:管理键盘快捷键。
*   **编辑器**:这可以通过选择颜色、使用模板或更改编码来定制代码编辑器。默认编码是 UTF-8。您将使用代码编辑器了解更多关于[第 4 章](04.html "Chapter 4. Using the Code Editor")、*中**编辑器**设置的信息。*
*   **插件**:管理插件。您可以安装和删除插件，启用或禁用它们，或者检查它们的版本。
*   **版本控制**:在这个部分可以找到与版本控制相关的设置；例如，您可以配置后台执行或添加要忽略的文件。版本控制将在[第 6 章](06.html "Chapter 6. Tools")、*工具*中详细说明。
*   **构建**、**执行**、**部署**:在本节中，您可以配置构建工具，如 Gradle、编译器和调试器。
*   **语言&框架**:这些是与你的项目中使用的框架相关的设置。
*   **工具**:本部分包括其他工具的相关设置。您可以管理 web 浏览器、终端或添加服务器证书。

这些设置中有些是常规设置，但有些仅适用于当前项目。您可以通过出现在当前项目设置旁边的图标来区分当前项目设置，或者通过设置标题中的标签**来区分当前项目**，如下图所示:

![Project settings](graphics/B05459_03_07.jpg)

除了这些**设置**之外，在**项目结构**对话框中还有进一步的设置。导航至**文件** | **项目结构**菜单。这些设置包括以下内容:

*   **SDK 位置**:可以更改项目 SDK。在[第一章](01.html "Chapter 1. Installing and Configuring Android Studio")、*安装配置安卓工作室*中，我们选择了一个 SDK 作为默认。在这个屏幕中，我们可以更改这个 SDK，只针对当前项目。
*   **项目**:可以更改 Gradle 版本或者插件库库。
*   **开发者服务**:你可以在你的 app 中配置几个开发者服务。可用服务如下:**广告**(AdMob)**分析**(谷歌分析)**认证**(谷歌登录)**云** (Firebase)和**通知**(谷歌云消息)。
*   **Modules**: According to IntelliJ IDEA ([http://www.jetbrains.com/idea/webhelp/module.html](http://www.jetbrains.com/idea/webhelp/module.html)), the following is the definition of a module:

    > *“模块是一个独立的功能单元，您可以独立编译、运行、测试和调试。”*

    该**模块**菜单显示了现有模块及其方面的列表。我们项目中的默认模块是`app`模块。设置选项卡对应于以下梯度构建文件配置:**属性**、**签名**、**风格**、**构建类型**和**依赖项**。

您可以通过点击**项目结构**对话框左上角的添加按钮向您的项目添加新模块。此操作将打开一个模块选择器向导，如下图所示:

![Project settings](graphics/B05459_03_08.jpg)

可以选择以下模块类型之一:**手机&平板模块****安卓库****安卓穿戴模块****安卓电视模块****玻璃模块****导入 Gradle 项目****导入 Eclipse ADT 项目****导入。JAR/。AAR 包**、 **Java 库**，或者**谷歌云模块**。

# 总结

我们看到了项目在安卓工作室中是如何呈现的，以及它们在创建时默认包含哪些文件夹。我们探究了拥有这些文件夹的原因，并检查了`AndroidManifest.xml`文件及其用途。我们还浏览了**偏好设置**和**项目结构**对话框中的项目设置。现在，你应该知道如何在安卓工作室中操作和浏览一个项目。

在下一章中，我们将讨论如何使用文本编辑器。正确了解文本编辑器对于提高我们的编程效率非常重要。您将了解编辑器设置以及如何自动完成代码、使用预生成的代码块和浏览代码。您还将了解一些有用的快捷方式。